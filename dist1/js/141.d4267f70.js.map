{"version":3,"file":"js/141.d4267f70.js","mappings":"kRAEIA,EAAAA,EAAAA,GAAkB,UAAd,aAAS,K,WAEJ,qB,SAGAC,MAAM,S,WAKN,kB,oBA0BJA,MAAM,S,SAKJA,MAAM,QAAuCC,MAAA,oE,+FA1CtDC,EAAAA,EAAAA,IAkDU,gBAjDRC,GACAJ,EAAAA,EAAAA,GA+CO,QA/CAK,SAAM,mCAAeC,kBAAgB,KAAhBA,oBAAgB,mBAA5C,EACEN,EAAAA,EAAAA,GAMQ,0BAJNA,EAAAA,EAAAA,GAAkF,SAA3EO,KAAK,OAAOC,KAAK,Q,0CAAsBC,MAAKC,GAAEC,YAAY,iBAAjE,sBAA8CF,SAIxC,KAHwBG,OAAOC,aAAAA,EAAAA,EAAAA,OAArCV,EAAAA,EAAAA,IAEM,MAFN,EAAiD,0CAAjD,kBAKFH,EAAAA,EAAAA,GA6BQ,0BA3BNA,EAAAA,EAAAA,GAI6B,SAH/BO,KAAI,CAAGO,EAAAA,gBACRN,KAAK,W,0CACSO,SAAQL,GACrBM,OAAI,qBAAQC,mBAJV,uBAGWF,aAGfG,EAAAA,EAAAA,IAOcC,EAAA,CANblB,OAAK,SAAC,MAAK,WAGiBmB,UAF5BC,KAAK,kBACJC,QAAK,oBAAOC,iBAEbC,IAAI,yBACJC,IAAI,GACJC,MAAM,MAPP,mBAQAR,EAAAA,EAAAA,IAOaC,EAAA,CANZlB,OAAK,SAAC,MAAK,YAGkBmB,UAF7BC,KAAK,wBACJC,QAAK,oBAAOL,iBAEbO,IAAI,+BACJC,IAAI,GACJC,MAAM,MAPP,kBAaU,KAHoBd,OAAOe,gBAAAA,EAAAA,EAAAA,OAArCxB,EAAAA,EAAAA,IAEU,MAFV,EAAoD,2CAApD,iBA1BE,KA+B8BS,OAAOgB,cAAAA,EAAAA,EAAAA,OAArCzB,EAAAA,EAAAA,IAEM,MAFN,EAAqH,+BAArH,gBAIAH,EAAAA,EAAAA,GAES,UAFA6B,SAAoB,IAAZ,KAAOpB,OAA4B,IAAvB,KAAeM,UAAgB,iBAE5D,EAAAe,IA9CF,K,yBAuDF,GAEEtB,KAAM,YAENuB,OAEE,MAAO,CACLtB,MAAO,GACPM,SAAU,GACdK,QAAO,EAEHR,OAAS,CACPC,YAAY,EACZc,eAAe,EACfC,aAAa,GAGlB,EAEDI,QACA,CACDT,gBACCU,KAAKb,QAAS,CACd,EAEDH,gBACCgB,KAAKb,QAAS,CACd,EAEDc,eACC,OAAQD,KAAKb,OAAU,OAAS,UAChC,EAEEe,yBAcE,GAVAF,KAAKrB,OAAOgB,aAAc,EAM1BK,KAAKrB,OAAOC,WAAmC,IAAjBoB,KAAKxB,MACnCwB,KAAKrB,OAAOe,cAAmC,IAAjBM,KAAKlB,UAG9BkB,KAAKrB,OAAOC,aAAeoB,KAAKrB,OAAOe,cAC5C,CAGE,IAAII,QAAaK,EAAAA,EAAAA,MAAmBH,KAAKxB,MAAOwB,KAAKlB,UAIrDsB,EAAAA,EAAAA,IAAa,WAAYN,SAGfK,EAAAA,EAAAA,eAMRH,KAAKK,OAAOC,OAAQ,iBAIpBN,KAAKO,QAAQC,KAAM,CAAEjC,KAAO,UAK5ByB,KAAKrB,OAAOgB,aAAc,CAG9B,CACF,I,QChIN,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://liste-de-course/./src/views/Login.vue","webpack://liste-de-course/./src/views/Login.vue?240b"],"sourcesContent":["<template>\n  <section>\n    <h2>Connexion</h2>\n    <form @submit.prevent=\"this.handleFormSubmit\">\n      <label>\n        Login ou e-mail\n        <input type=\"text\" name=\"login\" v-model=\"this.login\" placeholder=\"Paul Position\"/>\n        <div class=\"error\" v-if=\"this.errors.loginEmpty\">\n          Vous devez saisir un identifiant !\n        </div>\n      </label>\n\n      <label>\n        Mot de passe\n        <input\n\t\t\t\t\t:type=\"[pwdInputType()]\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tv-model=\"this.password\"\n\t\t\t\t\t@blur=\"[this.handleHidePwd()]\"/>\n\t\t\t\t\n\t\t\t\t<font-awesome-icon\n\t\t\t\t\tclass=\"eye\"\n\t\t\t\t\ticon=\"fa-solid fa-eye\"\n\t\t\t\t\t@click=\"this.handleShowPwd()\"\n\t\t\t\t\tv-bind:class=\"{'hide': this.seePwd}\"\n\t\t\t\t\tsrc=\"@/assets/eye-solid.svg\"\n\t\t\t\t\talt=\"\"\n\t\t\t\t\twidth=\"16\" /> \n\t\t\t\t<font-awesome-icon\n\t\t\t\t\tclass=\"eye\"\n\t\t\t\t\ticon=\"fa-solid fa-eye-slash\"\n\t\t\t\t\t@click=\"this.handleHidePwd()\"\n\t\t\t\t\tv-bind:class=\"{'hide': !this.seePwd}\"\n\t\t\t\t\tsrc=\"@/assets/eye-slash-solid.svg\"\n\t\t\t\t\talt=\"\"\n\t\t\t\t\twidth=\"16\"/>\n\n\t\t\t\t\n\t\t\t\t<div class=\"error\" v-if=\"this.errors.passwordEmpty\">\n          Vous devez saisir un mot de passe !\n        </div>\n      </label>\n\n      <div class=\"error\" v-if=\"this.errors.loginFailed\" style=\"font-weight: bold; margin-bottom: 1em; text-align: center;\">\n        Identifiants incorrects\n      </div>\n\n      <button :disabled=\"this.login == '' || this.password == ''\">\n        Se connecter\n      </button>\n    </form>\n  </section>\n</template>\n\n<script>\n  import userService from \"@/Services/userService\";\n  import storage     from \"@/utils/storage\";\n\t\n  export default \n  {\n    name: \"LoginView\",\n\t\t\n    data()\n    {\n      return {\n        login: \"\",\n        password: \"\",\n\t\t\t\tseePwd:false,\n\t\t\t\t\n        errors : {\n          loginEmpty: false,\n          passwordEmpty: false,\n          loginFailed: false,\n        }\n      }\n    },\n\n    methods: \n    {\n\t\t\thandleShowPwd(){\n\t\t\t\tthis.seePwd = true;\n\t\t\t},\n\t\t\t\n\t\t\thandleHidePwd(){\n\t\t\t\tthis.seePwd = false\n\t\t\t},\n\t\t\t\n\t\t\tpwdInputType(){\n\t\t\t\treturn (this.seePwd) ? 'text' : 'password';\n\t\t\t},\n\t\t\t\n      async handleFormSubmit()\n      {\n\n        // On retire l'erreur précédente\n        this.errors.loginFailed = false;\n\n        // --- Vérification des données du formulaire --- //\n\n        // En version raccourcie : on stocke le résultat de la condition dans la variable\n\n        this.errors.loginEmpty    = ( this.login    == \"\" );\n        this.errors.passwordEmpty = ( this.password == \"\" );\n\n        // Si une erreur est rencontrée, on n'envoi pas la requete au serveur !\n        if( !this.errors.loginEmpty && !this.errors.passwordEmpty )\n        {\n\n          // Envoie de la requette à l'endpoint JWT et récupération d'un token de connexion\n          let data = await userService.login( this.login, this.password );\n\n          // Stokage du token dans le localStorage\n          // L'objet data sera convertit en JSON\n          storage.set( \"userData\", data );\n\n          // ON AWAIT LE RETOUR DE isConnected() pour la validation du token, sinon on reçoit une Promise et non un booléen !\n          if( await userService.isConnected() )\n          {\n            // On émet un event custom pour indiquer aux parents \n            // que l'utilisateur s'est connecté avec succès\n            // this.$emit( \"user-connected\" );\n            // VueX : Plus besoin de s'embeter a faire remonter des events\n            this.$store.commit( 'userConnected' );\n\t\t\t\t\t\t\n\t\t\t\t\t\t//console.log(\"connecté\");\n            // Redirection vers la home\n            this.$router.push( { name : 'list' } );\n          }\n          else\n          {\n            // Token invalide, ou identifiants invalides\n            this.errors.loginFailed = true;\n\t\t\t\t\t\t//console.log(\"ERREUR ! ! !\")\n          }\n        }\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n\n/*This min-height section is to force mozilla android to keep the nav-bar.*/\nsection{\n\tmin-height: calc(100vh + 0.05em);\n}\n\nh2 {\n  text-align: center;\n  padding-top: 1em;\n  font-size: 2em;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  padding: 1em;\n  margin: 0;\n\nlabel {\n    margin-bottom: 1em;\n\t\tcolor: #003e7c;\n\t\ttext-align: left;\n\t\tfont-weight: normal;\n\t\tfont-family: 'Quicksand',  Arial, Helvetica, sans-serif;\n    input {\n      display: block;\n      margin: 5px 0;\n      width: 100%;\n      padding: 0.75em 1.5em;\n      // border-radius: 0.5em;\n\t\t\tbackground: #ffffff;;\n      border: none;\n\t\t\tborder-bottom: #00aeff 2px solid;\n\t\t\tborder-left:  #00aeff 2px solid;;\n      box-sizing: border-box;\n\t\t\t&:hover{\n\t\t\tbackground: #e0e0e0;;\n\t\t\t}\n\t\t\t&:focus{\n\t\t\tbackground: #e0e0e0;;\n\t\t\t}\n    }\n  }\n  .eye{\n\t\tcolor:#003e7c;\n\t\tfont-size: 1.1em;\n\t\tposition:relative;\n\t\tleft: calc(100% - 2em);\n\t\ttop:-2em;\n\t\t&:hover{\n\t\t\tcursor:pointer;\n\t\t}\n\t\t&.hide{\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n  button {\n    display: block;\n    margin: 5px 0 2.3em 0;\n    width: 100%;\n    padding: 1em 1.5em;\n    border-radius: 0.5em;\n    color: white;\n\t\tbackground: blueviolet;\n    font-weight: bold;\n    border: none;\n    box-sizing: border-box;\n\t\ttransition: 0.3s;\n\n    &:hover\n    {\n      cursor: pointer;\n\t\t\tbackground: lighten(blueviolet, 15%);\n    }\n\t\t&:disabled{\n\t\t\tbackground: #bbb;\n\t\t}\n  }\n}\n</style>","import { render } from \"./Login.vue?vue&type=template&id=7d9f6098&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=7d9f6098&lang=scss&scoped=true\"\n\nimport exportComponent from \"/var/www/html/Projets_Vue/liste-de-course/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7d9f6098\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","_createElementBlock","_hoisted_1","onSubmit","handleFormSubmit","type","name","login","$event","placeholder","errors","loginEmpty","$options","password","onBlur","handleHidePwd","_createVNode","_component_font_awesome_icon","seePwd","icon","onClick","handleShowPwd","src","alt","width","passwordEmpty","loginFailed","disabled","_hoisted_8","data","methods","this","pwdInputType","async","userService","storage","$store","commit","$router","push","__exports__","render"],"sourceRoot":""}