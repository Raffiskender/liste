{"version":3,"file":"js/187.0c7b75d8.js","mappings":"qNACEA,EAAAA,EAAAA,IACM,M,CAGR,OACCC,KAAO,e,QCCR,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,qhBCwBA,EAAe,CACbF,KAAO,iB,gCAYP,MAAMG,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAUD,EAAAA,EAAAA,IAAI,yJACdE,GAASF,EAAAA,EAAAA,IAAI,CACjBG,YAAY,EACZC,aAAY,EACZC,eAAc,IAEVC,GAAWN,EAAAA,EAAAA,KAAI,GACfO,GAAUP,EAAAA,EAAAA,KAAI,GACdQ,GAAeR,EAAAA,EAAAA,IAAI,IAKnBS,EAAe,IACI,IAAfV,EAAMW,MAAe,GAAMT,EAAQS,MAAMC,KAAKZ,EAAMW,OAAU,cAAgB,YAGlFE,EAAmBC,UAYrB,GAVAX,EAAOQ,MAAMP,YAAa,EAC1BD,EAAOQ,MAAMN,aAAc,EAC3BF,EAAOQ,MAAML,eAAgB,EAC7BG,EAAaE,MAAQ,GACrBH,EAAQG,OAAQ,EAGhBR,EAAOQ,MAAMP,WAA6B,IAAfJ,EAAMW,MACjCR,EAAOQ,MAAMN,aAAiBH,EAAQS,MAAMC,KAAKZ,EAAMW,QAElDR,EAAOQ,MAAMP,aAAeD,EAAOQ,MAAMN,YAAY,CACxD,MAAMU,QAAiBC,EAAAA,EAAAA,yBAAqChB,EAAMW,OAG1C,GAApBI,EAASP,SACXA,EAAQG,OAAQ,EAChBX,EAAMW,MAAQ,GACdJ,EAASI,OAAQ,EACjBR,EAAOQ,MAAML,eAAgB,IAG7BG,EAAaE,MAAQI,EAASA,SAASE,QACvCd,EAAOQ,MAAML,eAAgB,EAC7BC,EAASI,OAAQ,EACjBH,EAAQG,OAAQ,EAEnB,G,q+BCtFP,MAAMb,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://liste-de-course/./src/components/SpinnerCpnt.vue","webpack://liste-de-course/./src/components/SpinnerCpnt.vue?0ffb","webpack://liste-de-course/./src/views/PasswordResetView.vue","webpack://liste-de-course/./src/views/PasswordResetView.vue?bad5"],"sourcesContent":["<template>\n\t\t<div>\n\t\t</div>\n</template>\n<script>\nexport default {\n\tname : 'SpinnerCpnt'\n}\n</script>\n\n<style lang=\"scss\" scoped>\nbutton{\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-family: 'Quicksand',  Arial, Helvetica, sans-serif;\n\tmargin:.2em .5em .2em .5em;\n\tbackground: rgb(216, 226, 253);\n\tborder: none;\n\twidth: 8em;\n\theight: 2.5em;\n\t//box-shadow: 0px 0px 6px #555;\n\ttransition: 0.3s;\n\tcursor:pointer;\n}\n\ndiv{\n\theight: 1.3em;\n\twidth: 1.3em;\n  border:3px solid #ff00c8;\n  border-top:3px solid rgb(216, 226, 253);\n  border-radius:50%;\n\t\n\t-webkit-transition-property: -webkit-transform;\n  -webkit-transition-duration: 1.2s;\n  -webkit-animation-name: rotate;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  \n  -moz-transition-property: -moz-transform;\n  -moz-animation-name: rotate; \n  -moz-animation-duration: 1.2s; \n  -moz-animation-iteration-count: infinite;\n  -moz-animation-timing-function: linear;\n  \n  transition-property: transform;\n  animation-name: rotate; \n  animation-duration: 1.2s; \n  animation-iteration-count: infinite;\n  animation-timing-function: linear;}\n\n@-webkit-keyframes rotate {\n    from {-webkit-transform: rotate(0deg);}\n    to {-webkit-transform: rotate(360deg);}\n}\n\n@-moz-keyframes rotate {\n    from {-moz-transform: rotate(0deg);}\n    to {-moz-transform: rotate(360deg);}\n}\n\n@keyframes rotate {\n    from {transform: rotate(0deg);}\n    to {transform: rotate(360deg);}\n}\n\n\n/* Rest of page style*/\nbody{\n  background:#FABC20;\n  font-family: 'Open Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  color:#393D3D;\n}\n\n#container{\n  width:90%;\n  max-width:700px;\n  margin:1em auto;\n  position:relative;\n}\n\n/* spinner positioning */\n\n#html-spinner, #svg-spinner{\n  position:absolute;\n  top:80px;\n  margin-left:-24px;\n}\n\n\n\n\n\n</style>","import { render } from \"./SpinnerCpnt.vue?vue&type=template&id=0d82b6c3&scoped=true\"\nimport script from \"./SpinnerCpnt.vue?vue&type=script&lang=js\"\nexport * from \"./SpinnerCpnt.vue?vue&type=script&lang=js\"\n\nimport \"./SpinnerCpnt.vue?vue&type=style&index=0&id=0d82b6c3&lang=scss&scoped=true\"\n\nimport exportComponent from \"/var/www/html/Projets_Vue/liste-de-course-v2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0d82b6c3\"]])\n\nexport default __exports__","<template>\n\t<h1>Réinitialisation du mot de passe</h1>\n    <form @submit.prevent=\"handleFormSubmit()\">\n        <input\n        type=\"email\"\n        name=\"Email\"\n        v-model=\"email\"\n        placeholder=\"Entrez votre email\"\n        :class=\"[isEmailValid()]\"\n        required/>\n        <div class=\"error\" v-if=\"errors.emailEmpty\">\n          Vous devez saisir un mail !\n        </div>\n        <div class=\"error\" v-if=\"errors.invalidMail\">\n          E-mail invalide !\n        </div>\n      \n      <button :disabled=\"email == '' || isEmailValid() == 'has-error'\">\n        <span v-if=\"!awaiting\">Envoyer</span>\n        <SpinnerCpnt v-else />\n      </button>\n      <div class=\"error\" v-if=\"errors.sendingFailed\">\n        <p>Il y eu un pb lors de votre enregistrement</p>\n        <p>Message : {{errorMessage}}</p>\t\t\n      </div>\n      <div class=\"success\" v-if=\"success\" style=\"font-weight: bold; margin-bottom: 1em; text-align: center;\">\n        C'est envoyé ! Si votre mail est enregistré dans notre base, vous recevrez un mail avec un lien pour modifier votre mot de passe ! A bientôt !\n      </div>\n    </form>\n</template>\n\n<script>\n\nexport default {\n  name : 'PasswordReset'\n}\n\n</script>\n\n<script setup>\n\n  import { userService } from '@/services/userService';\n  //import LoadingVue from '@/components/Layout/Loading.vue';\n  import SpinnerCpnt from '@/components/SpinnerCpnt.vue';\n  import { ref } from 'vue';\n  \n  const email = ref('')\n  const regMail = ref(/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/)\n  const errors = ref({\n    emailEmpty: false,\n    invalidMail:false,\n    sendingFailed:false,\n  })\n  const awaiting = ref(false)\n  const success = ref(false)\n  const errorMessage = ref('')\n  \n  // const userId = ref(route.query['user'])\n  // userKey = ref(route.query['key'])\n\n  const isEmailValid = () => {\n    return (email.value == \"\") ? \"\" : (regMail.value.test(email.value)) ? 'has-success' : 'has-error';\n  }\n  \n  const handleFormSubmit = async() => {\n      //* Errors reinitialisation...\n      errors.value.emailEmpty = false;\n      errors.value.invalidMail = false;\n      errors.value.sendingFailed = false;\n      errorMessage.value = '';\n      success.value = false;\n      \n      //* Now come the verifications \n      errors.value.emailEmpty = (email.value == '')\n      errors.value.invalidMail = ( !regMail.value.test(email.value) );\n      \n      if (!errors.value.emailEmpty && !errors.value.invalidMail){\n        const response = await userService.userAsksForPasswordReset(email.value);\n        //* If we have a message, it means we have an error...\n        \n        if (response.success == 1){\n          success.value = true;\n          email.value = \"\";\n          awaiting.value = false;\n          errors.value.sendingFailed = false;\n        }\n        else {\n          errorMessage.value = response.response.message;\n          errors.value.sendingFailed = true;\n          awaiting.value = false;\n          success.value = false;\n        }\n      }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\nh1{\n\ttext-align: center;\n}\nform {\n  display: flex;\n  flex-direction: column;\n  padding: 1em;\n  margin: 0;\n  input {\n    display: block;\n    margin: 5px 0;\n    width: 100%;\n    padding: 0.75em 1.5em;\n    // border-radius: 0.5em;\n    background: #ffffff;;\n    border: none;\n    border-bottom: #00aeff 2px solid;\n    border-left:  #00aeff 2px solid;;\n    box-sizing: border-box;\n    transition:0.3s;\n    &:hover{\n    background: #e0e0e0;;\n    }\n    &:focus{\n    background: #e0e0e0;;\n    }\n    &.has-error{\n      background: rgb(255, 156, 156);\n    }\n    &.has-success{\n      background: rgb(159, 206, 159);\n    }\n  }\n}\n\n  button {\n    display: block;\n    margin: 5px 0 2.3em 0;\n    width: 100%;\n    padding: 1em 1.5em;\n    border-radius: 0.5em;\n    color: white;\n\t\tbackground: blueviolet;\n    font-weight: bold;\n    border: none;\n    box-sizing: border-box;\n\t\ttransition: 0.3s;\n\n     &:hover\n    {\n      cursor: pointer;\n\t\t\tbackground: darken(blueviolet, 15%);\n    }\n\t\t&:disabled{\n\t\t\tbackground: #bbb;\n\t\t}\n\t\t>div {\n\t\t\tmargin: auto;\n\t\t}\n  }\n\t\n</style>","import script from \"./PasswordResetView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PasswordResetView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PasswordResetView.vue?vue&type=style&index=0&id=43736414&lang=scss&scoped=true\"\n\nimport exportComponent from \"/var/www/html/Projets_Vue/liste-de-course-v2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-43736414\"]])\n\nexport default __exports__"],"names":["_createElementBlock","name","__exports__","render","email","ref","regMail","errors","emailEmpty","invalidMail","sendingFailed","awaiting","success","errorMessage","isEmailValid","value","test","handleFormSubmit","async","response","userService","message"],"sourceRoot":""}