"use strict";(self["webpackChunkliste_de_course"]=self["webpackChunkliste_de_course"]||[]).push([[288],{6603:function(e,t,i){i.d(t,{Z:function(){return p}});var s=i(3396);const n=e=>((0,s.dD)("data-v-34275ed9"),e=e(),(0,s.Cn)(),e),a={class:"loading"},o=n((()=>(0,s._)("div",{class:"loading__circle loading__circle--color-blue"},null,-1))),r=n((()=>(0,s._)("div",{class:"loading__circle loading__circle--color-red"},null,-1))),l=n((()=>(0,s._)("div",{class:"loading__circle loading__circle--color-yellow"},null,-1))),d=n((()=>(0,s._)("div",{class:"loading__circle loading__circle--color-green"},null,-1))),c=[o,r,l,d];function u(e,t,i,n,o,r){return(0,s.wg)(),(0,s.iD)("div",a,c)}var h={name:"LoadingView"},m=i(89);const b=(0,m.Z)(h,[["render",u],["__scopeId","data-v-34275ed9"]]);var p=b},2288:function(e,t,i){i.r(t),i.d(t,{default:function(){return Te}});var s=i(3396),n=i(9242),a=i(7139);const o=e=>((0,s.dD)("data-v-8f8866b2"),e=e(),(0,s.Cn)(),e),r=o((()=>(0,s._)("h1",{style:{"margin-bottom":"0.5em"}}," Les listes ",-1))),l={key:1},d={key:0},c=["id"],u={key:0},h=o((()=>(0,s._)("p",{style:{"text-align":"center"}}," Votre liste est toute vide ! Remplissez-là !",-1))),m=o((()=>(0,s._)("div",{class:"svg"},[(0,s._)("svg",{width:"37.754887mm",height:"64.519531mm",viewBox:"0 0 37.754887 64.519531",version:"1.1",id:"svg8","inkscape:version":"1.0.2 (e86c870879, 2021-01-15)","sodipodi:docname":"zero.svg.svg"},[(0,s._)("defs",{id:"defs2"}),(0,s._)("g",{"inkscape:label":"Calque 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-81.569086,-48.910156)"},[(0,s._)("g",{id:"g1231"},[(0,s._)("g",{id:"g1176",transform:"matrix(0.80237356,0,0,0.87338105,19.85089,10.295552)",style:{stroke:"#ccc","stroke-width":"8.12304","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},[(0,s._)("path",{id:"path1113",style:{fill:"none",stroke:"#ccc","stroke-width":"8.12304","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},d:"m 119.91201,81.31131 c 0,-16.069076 -7.43818,-24.048362 -19.46548,-24.048362 -12.0273,0 -19.465479,7.979286 -19.465481,24.048362 -10e-7,16.069081 7.438181,24.04837 19.465481,24.04837 12.0273,0 19.46548,-7.979289 19.46548,-24.04837 z","sodipodi:nodetypes":"ccccc"})]),(0,s._)("path",{style:{color:"#000000","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","line-height":"normal","font-family":"sans-serif","font-variant-ligatures":"normal","font-variant-position":"normal","font-variant-caps":"normal","font-variant-numeric":"normal","font-variant-alternates":"normal","font-variant-east-asian":"normal","font-feature-settings":"normal","font-variation-settings":"normal","text-indent":"0","text-align":"start","text-decoration":"none","text-decoration-line":"none","text-decoration-style":"solid","text-decoration-color":"#000000","letter-spacing":"normal","word-spacing":"normal","text-transform":"none","writing-mode":"lr-tb",direction:"ltr","text-orientation":"mixed","dominant-baseline":"auto","baseline-shift":"baseline","text-anchor":"start","white-space":"normal","shape-padding":"0","shape-margin":"0","inline-size":"0","clip-rule":"nonzero",display:"inline",overflow:"visible",visibility:"visible",opacity:"1",isolation:"auto","mix-blend-mode":"normal","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","solid-color":"#000000","solid-opacity":"1","vector-effect":"none",fill:"#ccc","fill-opacity":"1","fill-rule":"nonzero",stroke:"none","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","color-rendering":"auto","image-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","enable-background":"accumulate","stop-color":"#000000","stop-opacity":"1"},d:"M 109.62305,48.910156 85.433594,113.42969 h 6.023437 L 115.64844,48.910156 Z",id:"path1203","sodipodi:nodetypes":"ccccc"})])])])],-1))),b=[h,m],p={key:1,class:"list"},g={class:"add-form"},f=o((()=>(0,s._)("label",{for:"element"},null,-1))),v=["disabled"],w={key:0,class:"error"},y=o((()=>(0,s._)("p",null,"Entrez au moins une lettre",-1))),_=[y],T={key:1,class:"error"},k=o((()=>(0,s._)("p",null,"C'est un peu long, il faut moins de 75 caractères",-1))),D=[k];function S(e,t,i,o,h,m){const y=(0,s.up)("LoaderView"),k=(0,s.up)("TabsCpnt"),S=(0,s.up)("ListElement"),C=(0,s.up)("SpinnerBtn");return(0,s.wg)(),(0,s.iD)("section",null,[r,o.listStore.listData?((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(k),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.listStore.listData,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[e.selected?((0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("div",{id:"window-"+e.id},["vide"==e.content?((0,s.wg)(),(0,s.iD)("div",u,b)):((0,s.wg)(),(0,s.iD)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.content,(e=>((0,s.wg)(),(0,s.j4)(S,{key:e.id,title:e.content,id:e.id,done:e.done},null,8,["title","id","done"])))),128))]))],8,c)])):(0,s.kq)("",!0)])))),128)),(0,s._)("div",g,[(0,s._)("form",{onSubmit:t[3]||(t[3]=(0,n.iM)((e=>this.handleFormSubmit()),["prevent"]))},[f,(0,s.wy)((0,s._)("input",{type:"text",id:"element","onUpdate:modelValue":t[0]||(t[0]=e=>this.newElement=e),placeholder:"Nouvelle ligne",onFocus:t[1]||(t[1]=e=>this.engouthCaracteres=!1)},null,544),[[n.nr,this.newElement]]),(0,s._)("button",{class:(0,a.C_)(["button",{hide:this.disableButton}]),disabled:this.disableButton},(0,a.zw)(this.buttonContent),11,v),this.disableButton?((0,s.wg)(),(0,s.j4)(C,{key:0})):(0,s.kq)("",!0),this.newCategoryAppear?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:1,type:"text",id:"element","onUpdate:modelValue":t[2]||(t[2]=e=>this.newElement=e),placeholder:"Nouvelle rubrique"},null,512)),[[n.nr,this.newElement]]):(0,s.kq)("",!0)],32),"tooSmall"==this.engouthCaracteres?((0,s.wg)(),(0,s.iD)("div",w,_)):(0,s.kq)("",!0),"tooLarge"==this.engouthCaracteres?((0,s.wg)(),(0,s.iD)("div",T,D)):(0,s.kq)("",!0)])])):((0,s.wg)(),(0,s.j4)(y,{key:0}))])}const C={class:"container"},A=["id"],q={key:0,class:"error"},M=["id"],B=["id"],L=["id","innerHTML"];function E(e,t,i,o,r,l){const d=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",C,[(0,s._)("form",{onSubmit:t[2]||(t[2]=e=>l.handleSave(e,i.id))},[(0,s._)("div",{class:(0,a.C_)(["input",{hide:!this.editMode}])},[(0,s.wy)((0,s._)("input",{ref:"myInput",type:"text",id:"input-"+i.id,"onUpdate:modelValue":t[0]||(t[0]=e=>this.newTitle=e),onBlur:t[1]||(t[1]=e=>this.handleSave(e,i.id))},null,40,A),[[n.nr,this.newTitle]]),this.tooMuchCharacteres?((0,s.wg)(),(0,s.iD)("div",q," vous devez entrer moins de 75 charactères... ")):(0,s.kq)("",!0)],2)],32),(0,s._)("div",{class:(0,a.C_)(["input",{hide:!this.editMode}])},[(0,s._)("button",{style:{"margin-right":"1em"},id:"save-btn-"+i.id,onMousedown:t[3]||(t[3]=e=>this.preventBlur=!0),onClick:t[4]||(t[4]=e=>l.handleSave(e,i.id))}," Enregistrer ",40,M),(0,s._)("button",{id:"cancel-btn-"+i.id,onMousedown:t[5]||(t[5]=e=>this.preventBlur=!0),onClick:t[6]||(t[6]=e=>l.handleCancelModify(e))}," Annuler ",40,B)],2),(0,s._)("div",{class:(0,a.C_)(["text",{hide:this.editMode}])},[(0,s._)("p",{class:(0,a.C_)(["title",{done:i.done}]),id:"p-"+i.id,onMousedown:t[7]||(t[7]=e=>l.handleSwitchToEditMode(i.id)),innerHTML:i.title},null,42,L),(0,s._)("button",{class:(0,a.C_)(["aside-p",{hide:i.done}]),onClick:t[8]||(t[8]=e=>{this.listStore.toggleDone(i.id)})},[(0,s.Wm)(d,{class:"square",icon:"fa-regular fa-square",alt:"Mettre à fait"})],2),(0,s._)("button",{class:(0,a.C_)(["aside-p",{hide:!i.done}]),onClick:t[9]||(t[9]=e=>{this.listStore.toggleDone(i.id)})},[(0,s.Wm)(d,{color:"green",class:"square",icon:"fa-regular fa-square-check",alt:"Mettre en non fait"})],2),(0,s._)("button",{class:"aside-p",onClick:t[10]||(t[10]=e=>this.listStore.delete(i.id))},[(0,s.Wm)(d,{color:"red",class:"square",icon:"fa-regular fa-trash-can",alt:"supprimer"})])],2)])}var N=i(1020),z=i(6265),x=i.n(z),W=i(7247);const j={base_url:"https://listeback-v2.raffiskender.com/wp-json/",async findAll(){const e=W.t.get("userData"),t=await x().get(this.base_url+"liste-de-course/v1/data/"+e.user_id,{headers:{Authorization:"Bearer "+e.token}}).catch((function(){return{data:null}}));return t.data},async update(e){const t=W.t.get("userData"),i=await x().put(this.base_url+"liste-de-course/v1/data/"+t.user_id,{json:e},{headers:{Authorization:"Bearer "+t.token}}).catch((function(){return{data:null}}));return i.data}},I=(0,N.Q_)("list",{state:()=>({listData:!1}),actions:{async findAll(){this.listData=JSON.parse(await j.findAll()),"vide"!=this.listData&&1==this.listData[0].id||this.upgradeList()},updateDatabase(){j.update(JSON.stringify(this.listData))},upgradeList(){const e=this.listData;this.listData=[{id:1,tabName:"liste",selected:!0,content:e}],this.updateDatabase},add(e){for(const t of this.listData)if(t.selected)return"vide"==t.content&&(t.content=[]),t.content.push(e),void this.updateDatabase()},changeTitle(e,t){for(const i of this.listData)if(i.selected)for(const s of i.content)if(s.id===e)return s.content=t,void this.updateDatabase()},delete(e){for(const t of this.listData)if(t.selected)return t.content=t.content.filter((t=>t.id!==e)),0==t.content.length&&(t.content="vide"),void this.updateDatabase()},toggleDone(e){for(const t of this.listData)if(t.selected)for(const i of t.content)if(i.id===e)return i.done=!i.done,void this.updateDatabase()},createNewTab(){const e={id:Date.now(),tabName:"nouvelle liste",selected:!0,content:"vide"};for(const t of this.listData)t.selected=!1;return this.listData.push(e),this.updateDatabase(),e.id},removeTab(){let e,t=1,i=!1;for(e of this.listData){if(e.selected&&1!==e.id&&(this.listData=this.listData.filter((t=>t.id!==e.id)),this.updateDatabase(),i=!0),e.selected&&1===e.id)return!1;t=i?t:e.id}return this.changeSelectedTab(t),t},changeSelectedTab(e){for(const t of this.listData)t.selected=t.id==e;this.updateDatabase()},changeTabName(e,t){for(const i of this.listData)if(i.id===t)return i.tabName=e,void this.updateDatabase()},selectedTab(){for(const e of this.listData)if(1==e.selected)return e.id}}});var O={props:{title:String,id:Number,done:Boolean},setup(){const e=I(),{listData:t}=(0,N.Jk)(e);return{listStore:e,listData:t}},data(){return{editMode:!1,newTitle:this.title,preventBlur:!1,tooMuchCharacteres:!1}},methods:{cleanMessage(e){return this.$sanitize(e)},handleSwitchToEditMode(e){this.done||(this.editMode=!0,this.preventBlur=!1,setTimeout((function(){document.getElementById("input-"+e).focus()})))},backToDisplayMode(){this.editMode=!1},handleCancelModify(){this.newTitle=this.title,this.tooMuchCharacteres=!1,this.backToDisplayMode()},handleSave(e,t){this.tooMuchCharacteres=!1,e.preventDefault(),this.preventBlur&&"click"!=e.type||(this.newTitle.length>75&&(this.tooMuchCharacteres=!0),""===this.newTitle&&(this.listStore.delete(t),this.backToDisplayMode()),this.title===this.newTitle||this.tooMuchCharacteres||(this.listStore.changeTitle(t,this.newTitle),this.backToDisplayMode()),this.title!=this.newTitle||this.tooMuchCharacteres||this.backToDisplayMode(),"submit"==e.type&&document.getElementById("save-btn-"+t).focus())}}},V=i(89);const R=(0,V.Z)(O,[["render",E],["__scopeId","data-v-4b459d53"]]);var Z=R,H=i(6603);const P=e=>((0,s.dD)("data-v-7a63cf51"),e=e(),(0,s.Cn)(),e),Y={disabled:""},F=P((()=>(0,s._)("div",null,null,-1))),J=[F];function K(e,t,i,n,a,o){return(0,s.wg)(),(0,s.iD)("button",Y,J)}var U={name:"SpinnerBtn"};const $=(0,V.Z)(U,[["render",K],["__scopeId","data-v-7a63cf51"]]);var G=$;const Q=e=>((0,s.dD)("data-v-0d3c38e7"),e=e(),(0,s.Cn)(),e),X={class:"container"},ee={class:"tab"},te=["id","onClick"],ie=["id"],se=["onSubmit"],ne=["value","id","onBlur"],ae=["id"],oe={class:"right-side"},re=["disabled"],le=["disabled"],de={key:0,class:"errors"},ce={key:1,class:"errors"},ue={key:2,class:"errors"},he={key:3,class:"confirm"},me=Q((()=>(0,s._)("p",null,"Voulez-vous vraiment supprimer cet onglet ? ",-1)));function be(e,t,i,n,o,r){const l=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",X,[(0,s._)("button",{class:(0,a.C_)(["left-arrow arrow",{hide:!this.showArrow}]),onClick:t[0]||(t[0]=e=>r.handleLeftArrow())},[(0,s.Wm)(l,{icon:"fa-solid fa-less-than"})],2),(0,s._)("div",ee,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.listStore.listData,(e=>((0,s.wg)(),(0,s.iD)("button",{key:e.id,class:(0,a.C_)(["tablinks",{active:e.selected}]),id:"tabButton-"+e.id,onClick:t=>r.handleClickOnTab(t,e.id)},[(0,s._)("div",{id:"form-"+e.id,class:"hide"},[(0,s._)("form",{onSubmit:t=>this.handleSaveTitle(t,e.id)},[(0,s._)("input",{value:e.tabName,id:"input-"+e.id,onBlur:t=>this.handleSaveTitle(t,e.id)},null,40,ne)],40,se)],8,ie),(0,s._)("div",{id:"tab-"+e.id},(0,a.zw)(e.tabName),9,ae)],10,te)))),128))]),(0,s._)("div",oe,[(0,s._)("button",{class:"tablinks",onClick:t[1]||(t[1]=e=>this.handleNewTab()),disabled:this.listStore.listData.length>=15},[(0,s.Wm)(l,{icon:"fa-solid fa-plus"})],8,re),(0,s._)("button",{class:"tablinks red",onClick:t[2]||(t[2]=e=>1==this.listStore.selectedTab()?this.displayDeleteNbOneError():this.confirmDeletion=!0),disabled:1==this.listStore.selectedTab()},[(0,s.Wm)(l,{icon:"fa-solid fa-minus"})],8,le),(0,s._)("button",{class:(0,a.C_)(["right-arrow arrow",{hide:!this.showArrow}]),onClick:t[3]||(t[3]=e=>r.handleRightArrow())},[(0,s.Wm)(l,{icon:"fa-solid fa-greater-than"})],2)])]),this.errors.tooLong?((0,s.wg)(),(0,s.iD)("div",de," 25 charactères max !! ")):(0,s.kq)("",!0),this.errors.deleteTabNbOne?((0,s.wg)(),(0,s.iD)("div",ce," Vous ne pouvez pas supprimer le premier onglet... ")):(0,s.kq)("",!0),this.errors.tooMuchTabs?((0,s.wg)(),(0,s.iD)("div",ue," Vous ne pouvez pas créer plus de 15 onglets... ")):(0,s.kq)("",!0),this.confirmDeletion?((0,s.wg)(),(0,s.iD)("div",he,[me,(0,s._)("button",{class:"red",onClick:t[4]||(t[4]=e=>this.removeTab())}," oui "),(0,s._)("button",{onClick:t[5]||(t[5]=e=>this.confirmDeletion=!1)}," non ")])):(0,s.kq)("",!0)],64)}var pe={name:"TabsCpnt",created(){window.addEventListener("resize",this.resize)},setup(){const e=I();return{listStore:e}},mounted(){this.resize(),document.querySelector(".tab").addEventListener("scroll",this.disableAnArrow),this.disableAnArrow(),setTimeout((()=>{this.ajustTabPlace(document.querySelector(".active").id.substring(10))}),50),this.firstTab=document.querySelector("#tabButton-1")},data(){return{showArrow:0,preventEnter:0,newTabTitle:"",errors:{tooLong:!1,deleteTabNbOne:!1,tooMuchTabs:!1},confirmDeletion:!1}},methods:{handleClickOnTab(e,t){if("tablinks"==e.currentTarget.className){let i=document.getElementsByClassName("tablinks");for(let e=0;e<i.length;e++)i[e].className=i[e].className.replace(" active","");e.currentTarget.className+=" active",this.listStore.changeSelectedTab(t),setTimeout((()=>{this.ajustTabPlace(t)}),300,t),this.tabIsOpen=1}else if("tablinks active"==e.currentTarget.className&&0==this.preventEnter){let e=document.getElementById("form-"+t),i=document.getElementById("tab-"+t),s=document.getElementById("input-"+t);e.classList.remove("hide"),i.classList.add("hide"),s.focus(),this.preventEnter=1}},handleSaveTitle(e,t){e.preventDefault(),this.errors.tooLong=!1,this.newTabTitle=document.getElementById("input-"+t).value,""!=this.newTabTitle?(this.newTabTitle.length>25&&(this.newTabTitle=this.newTabTitle.substring(0,25),this.errors.tooLong=!0,setInterval((()=>{this.errors.tooLong=!1}),2e3)),document.querySelector("#form-"+t).classList.add("hide"),document.querySelector("#tab-"+t).classList.remove("hide"),setTimeout((()=>{this.preventEnter=0}),10),this.listStore.changeTabName(this.newTabTitle,t)):this.confirmDeletion=!0},handleNewTab(){if(this.listStore.listData.length<15){const e=this.listStore.createNewTab();setTimeout((()=>{this.resize()}),5),setTimeout((()=>{this.ajustTabPlace(e),this.disableAnArrow()}),5)}else this.errors.tooMuchTabs=!0,setTimeout((()=>{this.errors.tooMuchTabs=!1}),2e3)},handleLeftArrow(e=100){document.querySelector(".right-arrow").disabled=!1;const t=document.querySelector(".tab");t.scrollLeft-=e,setTimeout((()=>{this.disableAnArrow()}),450)},handleRightArrow(e=100){document.querySelector(".left-arrow").disabled=!1;const t=document.querySelector(".tab");t.scrollLeft+=e,setTimeout((()=>{this.disableAnArrow()}),450)},ajustTabPlace(e){const t=document.querySelector("#tabButton-"+e),i=t.getBoundingClientRect().x,s=t.scrollWidth,n=i+s,a=document.querySelector(".tab").getBoundingClientRect().x,o=document.querySelector(".tab").clientWidth,r=a+o;n>r?a+o/2+s/2>r?this.handleRightArrow(n-r+20):this.handleRightArrow(i-r+o/2+s/2):i<a&&(a+o/2+s/2>r?this.handleLeftArrow(a-i+20):this.handleLeftArrow(a-i+o/2-s/2))},displayDeleteNbOneError(){this.errors.deleteTabNbOne=!0,setTimeout((()=>{this.errors.deleteTabNbOne=!1}),2e3)},removeTab(){const e=this.listStore.removeTab();setTimeout((()=>{this.resize()}),50),setTimeout((()=>{this.ajustTabPlace(e),this.disableAnArrow()}),300),this.confirmDeletion=!1},resize(){const e=document.querySelector(".container")?document.querySelector(".container"):"",t=document.querySelector(".tab")?document.querySelector(".tab"):"",i=document.querySelector(".right-side")?document.querySelector(".right-side"):"";e&&(this.showArrow=e.scrollWidth-i.scrollWidth>=t.scrollWidth?0:1)},disableAnArrow(){const e=document.querySelector(".tab"),t=e.scrollWidth-e.clientWidth;let i=document.querySelector(".left-arrow"),s=document.querySelector(".right-arrow");0==e.scrollLeft?(i.disabled=!0,s.disabled=!1):e.scrollLeft>=t?(s.disabled=!0,i.disabled=!1):(s.disabled=!1,i.disabled=!1)}}};const ge=(0,V.Z)(pe,[["render",be],["__scopeId","data-v-0d3c38e7"]]);var fe=ge,ve=i(9079),we=i(3954),ye={name:"ListView",components:{ListElement:Z,LoaderView:H.Z,SpinnerBtn:G,TabsCpnt:fe},setup(){const e=I(),t=(0,we.L)();return{listStore:e,userStore:t}},data(){return{newElements:[],newElement:"",allRubriques:"",categoryAppear:!1,newCategoryAppear:!1,engouthCaracteres:!0,disableButton:!1,buttonContent:"Ajouter"}},async created(){await ve.W.isConnected()?await this.listStore.findAll():this.$router.push({name:"403"})},methods:{cleanMessage(e){return this.$sanitize(e)},async handleFormSubmit(){this.engouthCaracteres=!0,this.newElement.length<1?this.engouthCaracteres="tooSmall":this.newElement.length>75?this.engouthCaracteres="tooLarge":(this.disableButton=!0,this.buttonContent="",this.newElementObj={id:Date.now(),content:this.cleanMessage(this.newElement),done:!1},this.listStore.add(this.newElementObj),this.newElement="",this.disableButton=!1,this.buttonContent="Ajouter")},handleToggleCategory(){this.categoryAppear=!this.categoryAppear},handleOnChange(e){const t=e.currentTarget;"new"===t.value?this.newCategoryAppear=!0:this.newCategoryAppear=!1}}};const _e=(0,V.Z)(ye,[["render",S],["__scopeId","data-v-8f8866b2"]]);var Te=_e}}]);
//# sourceMappingURL=288.7bf2e5cf.js.map