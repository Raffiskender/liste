"use strict";(self["webpackChunkliste_de_course"]=self["webpackChunkliste_de_course"]||[]).push([[348],{6603:function(e,t,i){i.d(t,{Z:function(){return p}});var n=i(3396);const a=e=>((0,n.dD)("data-v-34275ed9"),e=e(),(0,n.Cn)(),e),s={class:"loading"},o=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-blue"},null,-1))),r=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-red"},null,-1))),l=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-yellow"},null,-1))),d=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-green"},null,-1))),c=[o,r,l,d];function u(e,t,i,a,o,r){return(0,n.wg)(),(0,n.iD)("div",s,c)}var h={name:"LoadingView"},m=i(89);const b=(0,m.Z)(h,[["render",u],["__scopeId","data-v-34275ed9"]]);var p=b},4348:function(e,t,i){i.r(t),i.d(t,{default:function(){return ye}});var n=i(3396),a=i(9242),s=i(7139);const o=e=>((0,n.dD)("data-v-3e9ef54e"),e=e(),(0,n.Cn)(),e),r=o((()=>(0,n._)("h1",{style:{"margin-bottom":"0.5em"}}," Mes listes ",-1))),l={key:1},d={key:0},c=["id"],u={key:0},h=o((()=>(0,n._)("p",null," Votre liste est toute vide ! Remplissez-là !",-1))),m=o((()=>(0,n._)("div",{class:"svg"},[(0,n._)("svg",{width:"37.754887mm",height:"64.519531mm",viewBox:"0 0 37.754887 64.519531",version:"1.1",id:"svg8","inkscape:version":"1.0.2 (e86c870879, 2021-01-15)","sodipodi:docname":"zero.svg.svg"},[(0,n._)("defs",{id:"defs2"}),(0,n._)("g",{"inkscape:label":"Calque 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-81.569086,-48.910156)"},[(0,n._)("g",{id:"g1231"},[(0,n._)("g",{id:"g1176",transform:"matrix(0.80237356,0,0,0.87338105,19.85089,10.295552)",style:{stroke:"#ccc","stroke-width":"8.12304","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},[(0,n._)("path",{id:"path1113",style:{fill:"none",stroke:"#ccc","stroke-width":"8.12304","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},d:"m 119.91201,81.31131 c 0,-16.069076 -7.43818,-24.048362 -19.46548,-24.048362 -12.0273,0 -19.465479,7.979286 -19.465481,24.048362 -10e-7,16.069081 7.438181,24.04837 19.465481,24.04837 12.0273,0 19.46548,-7.979289 19.46548,-24.04837 z","sodipodi:nodetypes":"ccccc"})]),(0,n._)("path",{style:{color:"#000000","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","line-height":"normal","font-family":"sans-serif","font-variant-ligatures":"normal","font-variant-position":"normal","font-variant-caps":"normal","font-variant-numeric":"normal","font-variant-alternates":"normal","font-variant-east-asian":"normal","font-feature-settings":"normal","font-variation-settings":"normal","text-indent":"0","text-align":"start","text-decoration":"none","text-decoration-line":"none","text-decoration-style":"solid","text-decoration-color":"#000000","letter-spacing":"normal","word-spacing":"normal","text-transform":"none","writing-mode":"lr-tb",direction:"ltr","text-orientation":"mixed","dominant-baseline":"auto","baseline-shift":"baseline","text-anchor":"start","white-space":"normal","shape-padding":"0","shape-margin":"0","inline-size":"0","clip-rule":"nonzero",display:"inline",overflow:"visible",visibility:"visible",opacity:"1",isolation:"auto","mix-blend-mode":"normal","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","solid-color":"#000000","solid-opacity":"1","vector-effect":"none",fill:"#ccc","fill-opacity":"1","fill-rule":"nonzero",stroke:"none","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","color-rendering":"auto","image-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","enable-background":"accumulate","stop-color":"#000000","stop-opacity":"1"},d:"M 109.62305,48.910156 85.433594,113.42969 h 6.023437 L 115.64844,48.910156 Z",id:"path1203","sodipodi:nodetypes":"ccccc"})])])])],-1))),b=[h,m],p={key:1,class:"list"},g={class:"add-form"},f=o((()=>(0,n._)("label",{for:"element"},null,-1))),w=["disabled"],v={key:0,class:"error"},y=o((()=>(0,n._)("p",null,"Entrez au moins une lettre",-1))),_=[y],k={key:1,class:"error"},D=o((()=>(0,n._)("p",null,"C'est un peu long, il faut moins de 75 caractères",-1))),T=[D];function S(e,t,i,o,h,m){const y=(0,n.up)("LoaderView"),D=(0,n.up)("TabsCpnt"),S=(0,n.up)("ListElement"),C=(0,n.up)("SpinnerBtn");return(0,n.wg)(),(0,n.iD)("section",null,[r,o.listStore.listData?((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(D),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.listStore.listData,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id},[e.selected?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",{id:"window-"+e.id},["vide"==e.content?((0,n.wg)(),(0,n.iD)("div",u,b)):((0,n.wg)(),(0,n.iD)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.content,(e=>((0,n.wg)(),(0,n.j4)(S,{key:e.id,title:e.content,id:e.id,done:e.done},null,8,["title","id","done"])))),128))]))],8,c)])):(0,n.kq)("",!0)])))),128)),(0,n._)("div",g,[(0,n._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)((e=>this.handleFormSubmit()),["prevent"]))},[f,(0,n.wy)((0,n._)("input",{type:"text",id:"element","onUpdate:modelValue":t[0]||(t[0]=e=>this.newElement=e),placeholder:"Nouvelle ligne",onFocus:t[1]||(t[1]=e=>this.engouthCaracteres=!1)},null,544),[[a.nr,this.newElement]]),(0,n._)("button",{class:(0,s.C_)(["button",{hide:this.disableButton}]),disabled:this.disableButton},(0,s.zw)(this.buttonContent),11,w),this.disableButton?((0,n.wg)(),(0,n.j4)(C,{key:0})):(0,n.kq)("",!0),this.newCategoryAppear?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",id:"element","onUpdate:modelValue":t[2]||(t[2]=e=>this.newElement=e),placeholder:"Nouvelle rubrique"},null,512)),[[a.nr,this.newElement]]):(0,n.kq)("",!0)],32),"tooSmall"==this.engouthCaracteres?((0,n.wg)(),(0,n.iD)("div",v,_)):(0,n.kq)("",!0),"tooLarge"==this.engouthCaracteres?((0,n.wg)(),(0,n.iD)("div",k,T)):(0,n.kq)("",!0)])])):((0,n.wg)(),(0,n.j4)(y,{key:0}))])}const C={class:"container"},A=["id"],B={key:0,class:"error"},q=["id"],M=["id"],E=["id","innerHTML"];function L(e,t,i,o,r,l){const d=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",C,[(0,n._)("form",{onSubmit:t[2]||(t[2]=e=>l.handleSave(e,i.id))},[(0,n._)("div",{class:(0,s.C_)(["input",{hide:!this.editMode}])},[(0,n.wy)((0,n._)("input",{ref:"myInput",type:"text",id:"input-"+i.id,"onUpdate:modelValue":t[0]||(t[0]=e=>this.newTitle=e),onBlur:t[1]||(t[1]=e=>this.handleSave(e,i.id))},null,40,A),[[a.nr,this.newTitle]]),this.tooMuchCharacteres?((0,n.wg)(),(0,n.iD)("div",B," vous devez entrer moins de 75 charactères... ")):(0,n.kq)("",!0)],2)],32),(0,n._)("div",{class:(0,s.C_)(["input",{hide:!this.editMode}])},[(0,n._)("button",{style:{"margin-right":"1em"},id:"save-btn-"+i.id,onMousedown:t[3]||(t[3]=e=>this.preventBlur=!0),onClick:t[4]||(t[4]=e=>l.handleSave(e))}," Enregistrer ",40,q),(0,n._)("button",{id:"cancel-btn-"+i.id,onMousedown:t[5]||(t[5]=e=>this.preventBlur=!0),onClick:t[6]||(t[6]=e=>l.handleCancelModify(e))}," Annuler ",40,M)],2),(0,n._)("div",{class:(0,s.C_)(["text",{hide:this.editMode}])},[(0,n._)("p",{class:(0,s.C_)(["title",{done:i.done}]),id:"p-"+i.id,onMousedown:t[7]||(t[7]=e=>l.handleSwitchToEditMode(i.id)),innerHTML:i.title},null,42,E),(0,n._)("button",{class:(0,s.C_)(["aside-p",{hide:i.done}]),onClick:t[8]||(t[8]=e=>{this.listStore.toggleDone(i.id)})},[(0,n.Wm)(d,{class:"square",icon:"fa-regular fa-square",alt:"Mettre à fait"})],2),(0,n._)("button",{class:(0,s.C_)(["aside-p",{hide:!i.done}]),onClick:t[9]||(t[9]=e=>{this.listStore.toggleDone(i.id)})},[(0,n.Wm)(d,{color:"green",class:"square",icon:"fa-regular fa-square-check",alt:"Mettre en non fait"})],2),(0,n._)("button",{class:"aside-p",onClick:t[10]||(t[10]=e=>this.listStore.delete(i.id))},[(0,n.Wm)(d,{color:"red",class:"square",icon:"fa-regular fa-trash-can",alt:"supprimer"})])],2)])}var N=i(1020),z=i(6265),x=i.n(z),W=i(7247);const j={base_url:"https://listeback-v2.raffiskender.com/wp-json/",async findAll(){const e=W.t.get("userData"),t=await x().get(this.base_url+"liste-de-course/v1/data/"+e.user_id,{headers:{Authorization:"Bearer "+e.token}}).catch((function(){return{data:null}}));return t.data},async update(e){const t=W.t.get("userData"),i=await x().put(this.base_url+"liste-de-course/v1/data/"+t.user_id,{json:e},{headers:{Authorization:"Bearer "+t.token}}).catch((function(){return{data:null}}));return i.data},async patch(e,t){const i=W.t.get("userData"),n=await x().patch(this.base_url+"wp/v2/list_element/"+e,{title:t},{headers:{Authorization:"Bearer "+i.token}}).catch((function(){return{data:null}}));return console.log(n.data),n.data},async delete(e){const t=W.t.get("userData");return await x()["delete"](this.base_url+"wp/v2/list_element/"+e,{headers:{Authorization:"Bearer "+t.token}}).catch((function(){return!1})),!0}},I=(0,N.Q_)("list",{state:()=>({listData:!1}),actions:{async findAll(){this.listData=JSON.parse(await j.findAll())},updateDatabase(){j.update(JSON.stringify(this.listData))},updateList(){const e=this.listData;this.listData=[{id:1,tabName:"liste",selected:!0,content:e}],this.updateDatabase},add(e){for(const t of this.listData)if(t.selected)return"vide"==t.content&&(t.content=[]),t.content.push(e),void this.updateDatabase()},changeTitle(e,t){for(const i of this.listData)if(i.selected)for(const n of i.content)if(n.id===e)return n.content=t,void this.updateDatabase()},delete(e){for(const t of this.listData)if(t.selected)return t.content=t.content.filter((t=>t.id!==e)),void(0==t.content.length&&(t.content="vide"));this.updateDatabase()},toggleDone(e){for(const t of this.listData)if(t.selected)for(const i of t.content)if(i.id===e)return i.done=!i.done,void this.updateDatabase()},createNewTab(){const e={id:Date.now(),tabName:"nouvelle liste",selected:!0,content:"vide"};for(const t of this.listData)t.selected=!1;return this.listData.push(e),this.updateDatabase(),e.id},removeTab(){let e,t=1,i=!1;for(e of this.listData){if(e.selected&&1!==e.id&&(this.listData=this.listData.filter((t=>t.id!==e.id)),this.updateDatabase(),i=!0),e.selected&&1===e.id)return!1;t=i?t:e.id}return this.changeSelectedTab(t),t},changeSelectedTab(e){for(const t of this.listData)t.selected=t.id==e;this.updateDatabase()},changeTabName(e,t){for(const i of this.listData)if(i.id===t)return i.tabName=e,void this.updateDatabase()},selectedTab(){return this.listData.filter((e=>1==e.selected))[0].id}}});var O={props:{title:String,id:Number,done:Boolean},setup(){const e=I(),{listData:t}=(0,N.Jk)(e);return{listStore:e,listData:t}},data(){return{editMode:!1,newTitle:this.title,preventBlur:!1,tooMuchCharacteres:!1}},methods:{cleanMessage(e){return this.$sanitize(e)},handleSwitchToEditMode(e){this.done||(this.editMode=!0,this.preventBlur=!1,setTimeout((function(){document.getElementById("input-"+e).focus()})))},backToDisplayMode(){this.editMode=!1},handleCancelModify(){this.newTitle=this.title,this.tooMuchCharacteres=!1,this.backToDisplayMode()},handleSave(e,t){this.tooMuchCharacteres=!1,e.preventDefault(),this.preventBlur&&"click"!=e.type||(this.newTitle.length>75&&(this.tooMuchCharacteres=!0),""===this.newTitle&&(this.listStore.delete(t),this.backToDisplayMode()),this.title===this.newTitle||this.tooMuchCharacteres||(this.listStore.changeTitle(t,this.newTitle),this.backToDisplayMode()),this.title!=this.newTitle||this.tooMuchCharacteres||this.backToDisplayMode(),"submit"==e.type&&document.getElementById("save-btn-"+t).focus())}}},R=i(89);const V=(0,R.Z)(O,[["render",L],["__scopeId","data-v-3248d3c1"]]);var Z=V,H=i(6603);const P=e=>((0,n.dD)("data-v-7a63cf51"),e=e(),(0,n.Cn)(),e),Y={disabled:""},F=P((()=>(0,n._)("div",null,null,-1))),J=[F];function K(e,t,i,a,s,o){return(0,n.wg)(),(0,n.iD)("button",Y,J)}var U={name:"SpinnerBtn"};const $=(0,R.Z)(U,[["render",K],["__scopeId","data-v-7a63cf51"]]);var G=$;const Q=e=>((0,n.dD)("data-v-789b240c"),e=e(),(0,n.Cn)(),e),X={class:"container"},ee={class:"tab"},te=["id","onClick"],ie=["id"],ne=["onSubmit"],ae=["value","id","onBlur"],se=["id"],oe={class:"right-side"},re=["disabled"],le={key:0,class:"errors"},de={key:1,class:"errors"},ce={key:2,class:"confirm"},ue=Q((()=>(0,n._)("p",null,"Voulez-vous vraiment supprimer cet onglet ? ",-1)));function he(e,t,i,a,o,r){const l=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",X,[(0,n._)("button",{class:(0,s.C_)(["left-arrow arrow",{hide:!this.showArrow}]),onClick:t[0]||(t[0]=e=>r.handleLeftArrow())},[(0,n.Wm)(l,{icon:"fa-solid fa-less-than"})],2),(0,n._)("div",ee,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.listStore.listData,(e=>((0,n.wg)(),(0,n.iD)("button",{key:e.id,class:(0,s.C_)(["tablinks",{active:e.selected}]),id:"tabButton-"+e.id,onClick:t=>r.handleClickOnTab(t,e.id)},[(0,n._)("div",{id:"form-"+e.id,class:"hide"},[(0,n._)("form",{onSubmit:t=>this.handleSaveTitle(t,e.id)},[(0,n._)("input",{value:e.tabName,id:"input-"+e.id,onBlur:t=>this.handleSaveTitle(t,e.id)},null,40,ae)],40,ne)],8,ie),(0,n._)("div",{id:"tab-"+e.id},(0,s.zw)(e.tabName),9,se)],10,te)))),128))]),(0,n._)("div",oe,[(0,n._)("button",{class:"tablinks",onClick:t[1]||(t[1]=e=>this.handleNewTab())},[(0,n.Wm)(l,{icon:"fa-solid fa-plus"})]),(0,n._)("button",{class:"tablinks red",onClick:t[2]||(t[2]=e=>1==this.listStore.selectedTab()?this.displayDeleteNbOneError():this.confirmDeletion=!0),disabled:1==this.listStore.selectedTab()},[(0,n.Wm)(l,{icon:"fa-solid fa-minus"})],8,re),(0,n._)("button",{class:(0,s.C_)(["right-arrow arrow",{hide:!this.showArrow}]),onClick:t[3]||(t[3]=e=>r.handleRightArrow())},[(0,n.Wm)(l,{icon:"fa-solid fa-greater-than"})],2)])]),this.errors.tooLong?((0,n.wg)(),(0,n.iD)("div",le," 25 charactères max !! ")):(0,n.kq)("",!0),this.errors.deleteTabNbOne?((0,n.wg)(),(0,n.iD)("div",de," Vous ne pouvez pas supprimer le premier onglet... ")):(0,n.kq)("",!0),this.confirmDeletion?((0,n.wg)(),(0,n.iD)("div",ce,[ue,(0,n._)("button",{class:"red",onClick:t[4]||(t[4]=e=>this.removeTab())}," oui "),(0,n._)("button",{onClick:t[5]||(t[5]=e=>this.confirmDeletion=!1)}," non ")])):(0,n.kq)("",!0)],64)}var me={name:"TabsCpnt",created(){window.addEventListener("resize",this.resize)},setup(){const e=I();return{listStore:e}},mounted(){this.resize(),document.querySelector(".tab").addEventListener("scroll",this.disableAnArrow),this.disableAnArrow(),setTimeout((()=>{this.ajustTabPlace(document.querySelector(".active").id.substring(10))}),50),this.firstTab=document.querySelector("#tabButton-1")},data(){return{showArrow:0,preventEnter:0,newTabTitle:"",errors:{tooLong:!1,deleteTabNbOne:!1},confirmDeletion:!1}},methods:{handleClickOnTab(e,t){if("tablinks"==e.currentTarget.className){let i=document.getElementsByClassName("tablinks");for(let e=0;e<i.length;e++)i[e].className=i[e].className.replace(" active","");e.currentTarget.className+=" active",this.listStore.changeSelectedTab(t),setTimeout((()=>{this.ajustTabPlace(t)}),300,t),this.tabIsOpen=1}else if("tablinks active"==e.currentTarget.className&&0==this.preventEnter){let e=document.getElementById("form-"+t),i=document.getElementById("tab-"+t),n=document.getElementById("input-"+t);e.classList.remove("hide"),i.classList.add("hide"),n.focus(),this.preventEnter=1}},handleSaveTitle(e,t){e.preventDefault(),this.errors.tooLong=!1,this.newTabTitle=document.getElementById("input-"+t).value,""!=this.newTabTitle?(this.newTabTitle.length>25&&(this.newTabTitle=this.newTabTitle.substring(0,25),this.errors.tooLong=!0,setInterval((()=>{this.errors.tooLong=!1}),2e3)),document.querySelector("#form-"+t).classList.add("hide"),document.querySelector("#tab-"+t).classList.remove("hide"),setTimeout((()=>{this.preventEnter=0}),10),this.listStore.changeTabName(this.newTabTitle,t)):this.confirmDeletion=!0},handleNewTab(){const e=this.listStore.createNewTab();setTimeout((()=>{this.resize()}),5),setTimeout((()=>{this.ajustTabPlace(e),this.disableAnArrow()}),5)},handleLeftArrow(e=100){document.querySelector(".right-arrow").disabled=!1;const t=document.querySelector(".tab");t.scrollLeft-=e,setTimeout((()=>{this.disableAnArrow()}),450)},handleRightArrow(e=100){document.querySelector(".left-arrow").disabled=!1;const t=document.querySelector(".tab");t.scrollLeft+=e,setTimeout((()=>{this.disableAnArrow()}),450)},ajustTabPlace(e){const t=document.querySelector("#tabButton-"+e),i=t.getBoundingClientRect().x,n=t.scrollWidth,a=i+n,s=document.querySelector(".tab").getBoundingClientRect().x,o=document.querySelector(".tab").clientWidth,r=s+o;a>r?s+o/2+n/2>r?this.handleRightArrow(a-r+20):this.handleRightArrow(i-r+o/2+n/2):i<s&&(s+o/2+n/2>r?this.handleLeftArrow(s-i+20):this.handleLeftArrow(s-i+o/2-n/2))},displayDeleteNbOneError(){this.errors.deleteTabNbOne=!0,setTimeout((()=>{this.errors.deleteTabNbOne=!1}),2e3)},removeTab(){const e=this.listStore.removeTab();setTimeout((()=>{this.resize()}),50),setTimeout((()=>{this.ajustTabPlace(e),this.disableAnArrow()}),300),this.confirmDeletion=!1},resize(){const e=document.querySelector(".container"),t=document.querySelector(".tab"),i=document.querySelector(".right-side");this.showArrow=e.scrollWidth-i.scrollWidth>=t.scrollWidth?0:1},disableAnArrow(){const e=document.querySelector(".tab"),t=e.scrollWidth-e.clientWidth;let i=document.querySelector(".left-arrow"),n=document.querySelector(".right-arrow");0==e.scrollLeft?(i.disabled=!0,n.disabled=!1):e.scrollLeft>=t?(n.disabled=!0,i.disabled=!1):(n.disabled=!1,i.disabled=!1)}}};const be=(0,R.Z)(me,[["render",he],["__scopeId","data-v-789b240c"]]);var pe=be,ge=i(3954),fe=i(9079),we={name:"ListView",components:{ListElement:Z,LoaderView:H.Z,SpinnerBtn:G,TabsCpnt:pe},setup(){const e=I(),t=(0,ge.L)();return{listStore:e,userStore:t}},data(){return{newElements:[],newElement:"",allRubriques:"",categoryAppear:!1,newCategoryAppear:!1,engouthCaracteres:!0,disableButton:!1,buttonContent:"Ajouter"}},async created(){await fe.W.isConnected()?await this.listStore.findAll():this.$router.push({name:"403"}),"vide"!=this.listStore.listData&&"boolean"!=typeof this.listStore.listData[0].done||(this.listStore.updateList(),this.listStore.listData[0].done)},methods:{cleanMessage(e){return this.$sanitize(e)},async handleFormSubmit(){this.engouthCaracteres=!0,this.newElement.length<1?this.engouthCaracteres="tooSmall":this.newElement.length>75?this.engouthCaracteres="tooLarge":(this.disableButton=!0,this.buttonContent="",this.newElementObj={id:Date.now(),content:this.cleanMessage(this.newElement),done:!1},this.listStore.add(this.newElementObj),this.newElement="",this.disableButton=!1,this.buttonContent="Ajouter")},handleToggleCategory(){this.categoryAppear=!this.categoryAppear},handleOnChange(e){const t=e.currentTarget;"new"===t.value?this.newCategoryAppear=!0:this.newCategoryAppear=!1}}};const ve=(0,R.Z)(we,[["render",S],["__scopeId","data-v-3e9ef54e"]]);var ye=ve}}]);
//# sourceMappingURL=348.cd795f46.js.map