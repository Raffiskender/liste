"use strict";(self["webpackChunkliste_de_course"]=self["webpackChunkliste_de_course"]||[]).push([[53],{5638:function(e,i,s){s.d(i,{Z:function(){return l}});var t=s(3396);function n(e,i,s,n,o,r){return(0,t.wg)(),(0,t.iD)("div")}var o={name:"SpinnerCpnt"},r=s(89);const a=(0,r.Z)(o,[["render",n],["__scopeId","data-v-0d82b6c3"]]);var l=a},1567:function(e,i,s){s.r(i),s.d(i,{default:function(){return U}});var t=s(3396),n=s(9242),o=s(7139),r=s.p+"img/google.8e413a87.png";const a=e=>((0,t.dD)("data-v-002b2e18"),e=e(),(0,t.Cn)(),e),l=a((()=>(0,t._)("h2",null,"Connexion",-1))),d=(0,t.Uk)(" Login ou e-mail "),u={key:0,class:"error"},p=(0,t.Uk)(" Mot de passe "),h=["type"],c=(0,t.Uk)("J'ai oublié mon mot de passe !"),m={key:0,class:"error"},w={key:0,class:"error",style:{"font-weight":"bold","margin-bottom":"1em","text-align":"center"}},g={key:1,class:"error",style:{"font-weight":"bold","margin-bottom":"1em","text-align":"center"}},f=["disabled"],y={key:0},v=a((()=>(0,t._)("div",{class:"google"},[(0,t._)("p",{style:{"margin-bottom":"1em"}},"Vous pouvez aussi vous connecter via"),(0,t._)("a",{href:"https://accounts.google.com/o/oauth2/v2/auth?scope=email profile&access_type=online&redirect_uri=https://liste-v2.raffiskender.com/googleLogin&response_type=code&client_id=270319015769-o80is9ik9r6pop7fmojb46ns28pic1li.apps.googleusercontent.com"},[(0,t._)("img",{src:r,style:{width:"180px",height:"auto"}})])],-1)));function _(e,i,s,r,a,_){const b=(0,t.up)("font-awesome-icon"),k=(0,t.up)("router-link"),C=(0,t.up)("SpinnerCpnt");return(0,t.wg)(),(0,t.iD)("section",null,[l,(0,t._)("form",{onSubmit:i[6]||(i[6]=(0,n.iM)(((...e)=>this.handleFormSubmit&&this.handleFormSubmit(...e)),["prevent"]))},[(0,t._)("label",null,[d,(0,t.wy)((0,t._)("input",{type:"text",name:"login","onUpdate:modelValue":i[0]||(i[0]=e=>this.login=e),placeholder:"Paul Position"},null,512),[[n.nr,this.login]]),this.errors.loginEmpty?((0,t.wg)(),(0,t.iD)("div",u," Vous devez saisir un identifiant ! ")):(0,t.kq)("",!0)]),(0,t._)("label",null,[p,(0,t.wy)((0,t._)("input",{type:[_.pwdInputType()],name:"password","onUpdate:modelValue":i[1]||(i[1]=e=>this.password=e),onBlur:i[2]||(i[2]=e=>[this.handleHidePwd()])},null,40,h),[[n.YZ,this.password]]),(0,t.Wm)(b,{class:(0,o.C_)(["eye",{hide:this.seePwd}]),icon:"fa-solid fa-eye",onClick:i[3]||(i[3]=e=>this.handleShowPwd()),alt:"",width:"16"},null,8,["class"]),(0,t.Wm)(b,{class:(0,o.C_)(["eye",{hide:!this.seePwd}]),icon:"fa-solid fa-eye-slash",onClick:i[4]||(i[4]=e=>this.handleHidePwd()),alt:"",width:"16"},null,8,["class"]),(0,t._)("div",null,[(0,t.Wm)(k,{to:{name:"passwordReset"}},{default:(0,t.w5)((()=>[c])),_:1})]),this.errors.passwordEmpty?((0,t.wg)(),(0,t.iD)("div",m," Vous devez saisir un mot de passe ! ")):(0,t.kq)("",!0)]),this.errors.loginFailed?((0,t.wg)(),(0,t.iD)("div",w," Identifiants incorrects ")):(0,t.kq)("",!0),this.errors.unconfirmedUser?((0,t.wg)(),(0,t.iD)("div",g," Vous ne pouvez pas vous connecter car votre email n'a pas été vérifié ! ")):(0,t.kq)("",!0),(0,t._)("button",{onClick:i[5]||(i[5]=(...e)=>this.handleFormSubmit&&this.handleFormSubmit(...e)),disabled:""==this.login||""==this.password||this.awaiting},[this.awaiting?((0,t.wg)(),(0,t.j4)(C,{key:1})):((0,t.wg)(),(0,t.iD)("span",y,"Se connecter"))],8,f)],32),v])}var b=s(9079),k=s(7247),C=s(5638),P=s(3954),S={name:"LoginView",components:{SpinnerCpnt:C.Z},setup(){const e=(0,P.L)();return{store:e}},data(){return{login:"",password:"",seePwd:!1,awaiting:!1,errors:{loginEmpty:!1,passwordEmpty:!1,loginFailed:!1,unconfirmedUser:!1}}},methods:{handleShowPwd(){this.seePwd=!0},handleHidePwd(){this.seePwd=!1},pwdInputType(){return this.seePwd?"text":"password"},async handleFormSubmit(){if(this.errors.loginFailed=!1,this.errors.unconfirmedUser=!1,this.awaiting=!0,this.errors.loginEmpty=""==this.login,this.errors.passwordEmpty=""==this.password,!this.errors.loginEmpty&&!this.errors.passwordEmpty){let e=await b.W.login(this.login,this.password);k.t.set("userData",e),null==e?(this.errors.loginFailed=!0,this.awaiting=!1):e.user_confirmed[0]==["0"]?(this.errors.unconfirmedUser=!0,this.awaiting=!1):await b.W.isConnected()&&(this.store.userConnection(),this.awaiting=!1,this.$router.push({name:"list"}))}}}},D=s(89);const F=(0,D.Z)(S,[["render",_],["__scopeId","data-v-002b2e18"]]);var U=F}}]);
//# sourceMappingURL=53.162ba0bc.js.map