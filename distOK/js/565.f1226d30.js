"use strict";(self["webpackChunkliste_de_course"]=self["webpackChunkliste_de_course"]||[]).push([[565],{5638:function(e,s,i){i.d(s,{Z:function(){return l}});var t=i(3396);function o(e,s,i,o,n,r){return(0,t.wg)(),(0,t.iD)("div")}var n={name:"SpinnerCpnt"},r=i(89);const a=(0,r.Z)(n,[["render",o],["__scopeId","data-v-0d82b6c3"]]);var l=a},1276:function(e,s,i){i.r(s),i.d(s,{default:function(){return U}});var t=i(3396),o=i(9242),n=i(7139),r=i.p+"img/google.8e413a87.png";const a=e=>((0,t.dD)("data-v-2ae6aee4"),e=e(),(0,t.Cn)(),e),l=a((()=>(0,t._)("h2",null,"Connexion",-1))),d=(0,t.Uk)(" Login ou e-mail "),u={key:0,class:"error"},h=(0,t.Uk)(" Mot de passe "),p=["type"],c=(0,t.Uk)("J'ai oublié mon mot de passe !"),m={key:0,class:"error"},g={key:0,class:"error",style:{"font-weight":"bold","margin-bottom":"1em","text-align":"center"}},w={key:1,class:"error",style:{"font-weight":"bold","margin-bottom":"1em","text-align":"center"}},y=["disabled"],f={key:0},v=a((()=>(0,t._)("div",{class:"google"},[(0,t._)("p",{style:{"margin-bottom":"1em"}},"Vous pouvez aussi vous connecter via"),(0,t._)("a",{href:"https://accounts.google.com/o/oauth2/v2/auth?scope=email profile&access_type=online&redirect_uri=https://liste-v2.raffiskender.com/googleLogin&response_type=code&client_id=270319015769-o80is9ik9r6pop7fmojb46ns28pic1li.apps.googleusercontent.com"},[(0,t._)("img",{src:r,style:{width:"180px",height:"auto"}})])],-1)));function _(e,s,i,r,a,_){const k=(0,t.up)("font-awesome-icon"),b=(0,t.up)("router-link"),C=(0,t.up)("SpinnerCpnt");return(0,t.wg)(),(0,t.iD)("section",null,[l,(0,t._)("form",{onSubmit:s[6]||(s[6]=(0,o.iM)(((...e)=>this.handleFormSubmit&&this.handleFormSubmit(...e)),["prevent"]))},[(0,t._)("label",null,[d,(0,t.wy)((0,t._)("input",{type:"text",name:"login","onUpdate:modelValue":s[0]||(s[0]=e=>this.login=e),placeholder:"Paul Position"},null,512),[[o.nr,this.login]]),this.errors.loginEmpty?((0,t.wg)(),(0,t.iD)("div",u," Vous devez saisir un identifiant ! ")):(0,t.kq)("",!0)]),(0,t._)("label",null,[h,(0,t.wy)((0,t._)("input",{type:[_.pwdInputType()],name:"password","onUpdate:modelValue":s[1]||(s[1]=e=>this.password=e),onBlur:s[2]||(s[2]=e=>[this.handleHidePwd()])},null,40,p),[[o.YZ,this.password]]),(0,t.Wm)(k,{class:(0,n.C_)(["eye",{hide:this.seePwd}]),icon:"fa-solid fa-eye",onClick:s[3]||(s[3]=e=>this.handleShowPwd()),src:"@/assets/eye-solid.svg",alt:"",width:"16"},null,8,["class"]),(0,t.Wm)(k,{class:(0,n.C_)(["eye",{hide:!this.seePwd}]),icon:"fa-solid fa-eye-slash",onClick:s[4]||(s[4]=e=>this.handleHidePwd()),src:"@/assets/eye-slash-solid.svg",alt:"",width:"16"},null,8,["class"]),(0,t._)("div",null,[(0,t.Wm)(b,{to:{name:"passwordReset"}},{default:(0,t.w5)((()=>[c])),_:1})]),this.errors.passwordEmpty?((0,t.wg)(),(0,t.iD)("div",m," Vous devez saisir un mot de passe ! ")):(0,t.kq)("",!0)]),this.errors.loginFailed?((0,t.wg)(),(0,t.iD)("div",g," Identifiants incorrects ")):(0,t.kq)("",!0),this.errors.unconfirmedUser?((0,t.wg)(),(0,t.iD)("div",w," Vous ne pouvez pas vous connecter car votre email n'a pas été vérifié ! ")):(0,t.kq)("",!0),(0,t._)("button",{onClick:s[5]||(s[5]=(...e)=>this.handleFormSubmit&&this.handleFormSubmit(...e)),disabled:""==this.login||""==this.password||this.awaiting},[this.awaiting?((0,t.wg)(),(0,t.j4)(C,{key:1})):((0,t.wg)(),(0,t.iD)("span",f,"Se connecter"))],8,y)],32),v])}var k=i(9079),b=i(7247),C=i(5638),P=i(3954),S={name:"LoginView",components:{SpinnerCpnt:C.Z},setup(){const e=(0,P.L)();return{store:e}},data(){return{login:"",password:"",seePwd:!1,awaiting:!1,errors:{loginEmpty:!1,passwordEmpty:!1,loginFailed:!1,unconfirmedUser:!1}}},methods:{handleShowPwd(){this.seePwd=!0},handleHidePwd(){this.seePwd=!1},pwdInputType(){return this.seePwd?"text":"password"},async handleFormSubmit(){if(this.errors.loginFailed=!1,this.errors.unconfirmedUser=!1,this.awaiting=!0,this.errors.loginEmpty=""==this.login,this.errors.passwordEmpty=""==this.password,!this.errors.loginEmpty&&!this.errors.passwordEmpty){let e=await k.W.login(this.login,this.password);b.t.set("userData",e),null==e?(this.errors.loginFailed=!0,this.awaiting=!1):e.user_confirmed[0]==["0"]?(this.errors.unconfirmedUser=!0,this.awaiting=!1):await k.W.isConnected()&&(this.store.userConnection(),this.awaiting=!1,this.$router.push({name:"list"}))}}}},D=i(89);const F=(0,D.Z)(S,[["render",_],["__scopeId","data-v-2ae6aee4"]]);var U=F}}]);
//# sourceMappingURL=565.f1226d30.js.map