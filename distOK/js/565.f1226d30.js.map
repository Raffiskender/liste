{"version":3,"file":"js/565.f1226d30.js","mappings":"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","sources":["webpack://liste-de-course/./src/components/SpinnerCpnt.vue","webpack://liste-de-course/./src/components/SpinnerCpnt.vue?0ffb","webpack://liste-de-course/./src/views/Login.vue","webpack://liste-de-course/./src/views/Login.vue?240b"],"sourcesContent":["<template>\n\t\t<div>\n\t\t</div>\n</template>\n<script>\nexport default {\n\tname : 'SpinnerCpnt'\n}\n</script>\n\n<style lang=\"scss\" scoped>\nbutton{\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-family: 'Quicksand',  Arial, Helvetica, sans-serif;\n\tmargin:.2em .5em .2em .5em;\n\tbackground: rgb(216, 226, 253);\n\tborder: none;\n\twidth: 8em;\n\theight: 2.5em;\n\t//box-shadow: 0px 0px 6px #555;\n\ttransition: 0.3s;\n\tcursor:pointer;\n}\n\ndiv{\n\theight: 1.3em;\n\twidth: 1.3em;\n  border:3px solid #ff00c8;\n  border-top:3px solid rgb(216, 226, 253);\n  border-radius:50%;\n\t\n\t-webkit-transition-property: -webkit-transform;\n  -webkit-transition-duration: 1.2s;\n  -webkit-animation-name: rotate;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  \n  -moz-transition-property: -moz-transform;\n  -moz-animation-name: rotate; \n  -moz-animation-duration: 1.2s; \n  -moz-animation-iteration-count: infinite;\n  -moz-animation-timing-function: linear;\n  \n  transition-property: transform;\n  animation-name: rotate; \n  animation-duration: 1.2s; \n  animation-iteration-count: infinite;\n  animation-timing-function: linear;}\n\n@-webkit-keyframes rotate {\n    from {-webkit-transform: rotate(0deg);}\n    to {-webkit-transform: rotate(360deg);}\n}\n\n@-moz-keyframes rotate {\n    from {-moz-transform: rotate(0deg);}\n    to {-moz-transform: rotate(360deg);}\n}\n\n@keyframes rotate {\n    from {transform: rotate(0deg);}\n    to {transform: rotate(360deg);}\n}\n\n\n/* Rest of page style*/\nbody{\n  background:#FABC20;\n  font-family: 'Open Sans', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  color:#393D3D;\n}\n\n#container{\n  width:90%;\n  max-width:700px;\n  margin:1em auto;\n  position:relative;\n}\n\n/* spinner positioning */\n\n#html-spinner, #svg-spinner{\n  position:absolute;\n  top:80px;\n  margin-left:-24px;\n}\n\n\n\n\n\n</style>","import { render } from \"./SpinnerCpnt.vue?vue&type=template&id=0d82b6c3&scoped=true\"\nimport script from \"./SpinnerCpnt.vue?vue&type=script&lang=js\"\nexport * from \"./SpinnerCpnt.vue?vue&type=script&lang=js\"\n\nimport \"./SpinnerCpnt.vue?vue&type=style&index=0&id=0d82b6c3&lang=scss&scoped=true\"\n\nimport exportComponent from \"/var/www/html/Projets_Vue/liste-de-course-v2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0d82b6c3\"]])\n\nexport default __exports__","<template>\n  <section>\n    <h2>Connexion</h2>\n    <form @submit.prevent=\"this.handleFormSubmit\">\n      <label>\n        Login ou e-mail\n        <input type=\"text\" name=\"login\" v-model=\"this.login\" placeholder=\"Paul Position\"/>\n        <div class=\"error\" v-if=\"this.errors.loginEmpty\">\n          Vous devez saisir un identifiant !\n        </div>\n      </label>\n\n      <label>\n        Mot de passe\n        <input\n\t\t\t\t\t:type=\"[pwdInputType()]\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tv-model=\"this.password\"\n\t\t\t\t\t@blur=\"[this.handleHidePwd()]\"/>\n\t\t\t\t\n\t\t\t\t<font-awesome-icon\n\t\t\t\t\tclass=\"eye\"\n\t\t\t\t\ticon=\"fa-solid fa-eye\"\n\t\t\t\t\t@click=\"this.handleShowPwd()\"\n\t\t\t\t\tv-bind:class=\"{'hide': this.seePwd}\"\n\t\t\t\t\tsrc=\"@/assets/eye-solid.svg\"\n\t\t\t\t\talt=\"\"\n\t\t\t\t\twidth=\"16\" /> \n\t\t\t\t<font-awesome-icon\n\t\t\t\t\tclass=\"eye\"\n\t\t\t\t\ticon=\"fa-solid fa-eye-slash\"\n\t\t\t\t\t@click=\"this.handleHidePwd()\"\n\t\t\t\t\tv-bind:class=\"{'hide': !this.seePwd}\"\n\t\t\t\t\tsrc=\"@/assets/eye-slash-solid.svg\"\n\t\t\t\t\talt=\"\"\n\t\t\t\t\twidth=\"16\"/>\n\n\t\t\t\t<div>\n          <router-link :to=\"{name : 'passwordReset'}\" >J'ai oublié mon mot de passe !</router-link>\n        </div>\n\t\t\t\t<div class=\"error\" v-if=\"this.errors.passwordEmpty\">\n          Vous devez saisir un mot de passe !\n        </div>\n      </label>\n\n      <div class=\"error\" v-if=\"this.errors.loginFailed\" style=\"font-weight: bold; margin-bottom: 1em; text-align: center;\">\n        Identifiants incorrects\n      </div>\n      <div class=\"error\" v-if=\"this.errors.unconfirmedUser\" style=\"font-weight: bold; margin-bottom: 1em; text-align: center;\">\n\t\t\t\tVous ne pouvez pas vous connecter car votre email n'a pas été vérifié !\n      </div>\n      <button @click=\"this.handleFormSubmit\" :disabled=\"this.login == '' || this.password == '' || this.awaiting\">\n        <span v-if=\"!this.awaiting\">Se connecter</span>\n\t\t\t\t<SpinnerCpnt v-else/>\n      </button>\n    </form>\n    <div class=\"google\">\n    \n    <p style = \"margin-bottom: 1em;\">Vous pouvez aussi vous connecter via</p>\n     <a href=\"https://accounts.google.com/o/oauth2/v2/auth?scope=email profile&access_type=online&redirect_uri=https://liste-v2.raffiskender.com/googleLogin&response_type=code&client_id=270319015769-o80is9ik9r6pop7fmojb46ns28pic1li.apps.googleusercontent.com\">    <img src=\"@/../public/google.png\" style = \"width : 180px; height : auto\">\n</a>\n</div>\n  </section>\n\t\n</template>\n\n<script>\n  import { userService }  from \"@/services/userService\";\n  import { storage }      from \"@/utils/storage\";\n\timport SpinnerCpnt      from \"@/components/SpinnerCpnt.vue\";\n  import { useUserStore } from \"@/stores/User\";\n  export default\n  {\n    name: \"LoginView\",\n\t\t\n\t\tcomponents:{\n\t\t\tSpinnerCpnt },\n\t\t\n    setup()\n    {\n      const store = useUserStore();\n      return{\n        store,\n\n      }\n      },\n    data() {\n      return {\n        login: \"\",\n        password: \"\",\n\t\t\t\tseePwd:false,\n\t\t\t\tawaiting:false,\n        \n        errors : {\n          loginEmpty: false,\n          passwordEmpty: false,\n          loginFailed: false,\n\t\t\t\t\tunconfirmedUser:false,\n        }\n      }\n    },\n    methods: \n    {\n\t\t\thandleShowPwd(){\n\t\t\t\tthis.seePwd = true;\n\t\t\t},\n\t\t\t\n\t\t\thandleHidePwd(){\n\t\t\t\tthis.seePwd = false\n\t\t\t},\n\t\t\t\n\t\t\tpwdInputType(){\n\t\t\t\treturn (this.seePwd) ? 'text' : 'password';\n\t\t\t},\n\t\t\t\n      async handleFormSubmit()\n      {\n        // On retire l'erreur précédente\n        this.errors.loginFailed = false;\n\t\t\t\tthis.errors.unconfirmedUser = false;\n\t\t\t\tthis.awaiting = true\n        // --- Vérification des données du formulaire --- //\n\n        // En version raccourcie : on stocke le résultat de la condition dans la variable\n\n        this.errors.loginEmpty    = ( this.login    == \"\" );\n        this.errors.passwordEmpty = ( this.password == \"\" );\n\n        // Si une erreur est rencontrée, on n'envoi pas la requete au serveur !\n        if( !this.errors.loginEmpty && !this.errors.passwordEmpty )\n        {\n\n          // Envoie de la requette à l'endpoint JWT et récupération d'un token de connexion\n          let data = await userService.login( this.login, this.password );\n\n          storage.set( \"userData\", data );\n\t\t\t\t\t\n\t\t\t\t\tif (data == null){\n\t\t\t\t\t\tthis.errors.loginFailed = true;\n\t\t\t\t\t\tthis.awaiting = false\n\t\t\t\t\t}\n          // Stokage du token dans le localStorage\n          // L'objet data sera convertit en JSON\n\n          // ON AWAIT LE RETOUR DE isConnected() pour la validation du token, sinon on reçoit une Promise et non un booléen !\n          else if( data.user_confirmed[0] == ['0'] ){\n\t\t\t\t\t\tthis.errors.unconfirmedUser = true\n\t\t\t\t\t\t//storeUser.userDisconnected();\n\t\t\t\t\t\tthis.awaiting = false\n\t\t\t\t\t}\n          else if( await userService.isConnected() )\n          {\t//console.log(data)\n\t\t\t\t\t\t//* on vérifie que notre user est \"confirmed\" :\n\t\t\t\t\t\t\t\t\t\t\t\n            // On émet un event custom pour indiquer aux parents \n            // que l'utilisateur s'est connecté avec succès\n            // this.$emit( \"user-connected\" );\n            // VueX : Plus besoin de s'embeter a faire remonter des events\n            this.store.userConnection();\n\t\t\t\t\t\tthis.awaiting = false\n\t\t\t\t\t\t\n\t\t\t\t\t\t//console.log(\"connecté\");\n            // Redirection vers la home\n            this.$router.push( { name : 'list' } );\n\t\t\t\t\t\t}\n          }    \n        }\n      }\n    }\n  \n</script>\n\n<style lang=\"scss\" scoped>\n\n/*This min-height section is to force mozilla android to keep the nav-bar.*/\nsection{\n\tmin-height: calc(100vh + 0.05em);\n}\ndiv.google{\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\nh2 {\n  text-align: center;\n  padding-top: 1em;\n  font-size: 2em;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  padding: 1em;\n  margin: 0;\n\nlabel {\n    margin-bottom: 1em;\n\t\tcolor: #003e7c;\n\t\ttext-align: left;\n\t\tfont-weight: normal;\n\t\tfont-family: 'Quicksand',  Arial, Helvetica, sans-serif;\n    input {\n      display: block;\n      margin: 5px 0;\n      width: 100%;\n      padding: 0.75em 1.5em;\n      // border-radius: 0.5em;\n\t\t\tbackground: #ffffff;;\n      border: none;\n\t\t\tborder-bottom: #00aeff 2px solid;\n\t\t\tborder-left:  #00aeff 2px solid;;\n      box-sizing: border-box;\n\t\t\t&:hover{\n\t\t\tbackground: #e0e0e0;;\n\t\t\t}\n\t\t\t&:focus{\n\t\t\tbackground: #e0e0e0;;\n\t\t\t}\n    }\n  }\n  .eye{\n\t\tcolor:#003e7c;\n\t\tfont-size: 1.1em;\n\t\tposition:relative;\n\t\tleft: calc(100% - 2em);\n\t\ttop:-2em;\n\t\t&:hover{\n\t\t\tcursor:pointer;\n\t\t}\n\t\t&.hide{\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n  button {\n    margin: 5px 0 2.3em 0;\n    width: 100%;\n    padding: 1em 1.5em;\n    border-radius: 0.5em;\n    color: white;\n\t\tbackground: blueviolet;\n    font-weight: bold;\n    border: none;\n    box-sizing: border-box;\n\t\ttransition: 0.3s;\n\n    &:hover\n    {\n      cursor: pointer;\n\t\t\tbackground: lighten(blueviolet, 15%);\n    }\n\t\t&:disabled{\n\t\t\tbackground: #bbb;\n\t\t}\n\t\t>div{\n\t\t\tmargin : auto\n\t\t}\n  }\n}\n</style>","import { render } from \"./Login.vue?vue&type=template&id=2ae6aee4&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=2ae6aee4&lang=scss&scoped=true\"\n\nimport exportComponent from \"/var/www/html/Projets_Vue/liste-de-course-v2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2ae6aee4\"]])\n\nexport default __exports__"],"names":["_createElementBlock","name","__exports__","render","_createElementVNode","class","style","href","src","_imports_0","_hoisted_1","onSubmit","handleFormSubmit","type","login","$event","placeholder","errors","loginEmpty","$options","password","onBlur","handleHidePwd","_createVNode","_component_font_awesome_icon","seePwd","icon","onClick","handleShowPwd","alt","width","_component_router_link","to","passwordEmpty","loginFailed","unconfirmedUser","disabled","awaiting","_createBlock","_component_SpinnerCpnt","key","_hoisted_11","_hoisted_12","components","SpinnerCpnt","setup","store","useUserStore","data","methods","this","pwdInputType","async","userService","storage","user_confirmed","userConnection","$router","push"],"sourceRoot":""}