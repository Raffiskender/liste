"use strict";(self["webpackChunkliste_de_course"]=self["webpackChunkliste_de_course"]||[]).push([[591],{6603:function(t,e,i){i.d(e,{Z:function(){return m}});var n=i(3396);const a=t=>((0,n.dD)("data-v-34275ed9"),t=t(),(0,n.Cn)(),t),s={class:"loading"},o=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-blue"},null,-1))),r=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-red"},null,-1))),l=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-yellow"},null,-1))),d=a((()=>(0,n._)("div",{class:"loading__circle loading__circle--color-green"},null,-1))),c=[o,r,l,d];function u(t,e,i,a,o,r){return(0,n.wg)(),(0,n.iD)("div",s,c)}var h={name:"LoadingView"},p=i(89);const g=(0,p.Z)(h,[["render",u],["__scopeId","data-v-34275ed9"]]);var m=g},6591:function(t,e,i){i.r(e),i.d(e,{default:function(){return et}});var n=i(3396),a=i(9242),s=i(7139);const o=t=>((0,n.dD)("data-v-eca45b3c"),t=t(),(0,n.Cn)(),t),r=o((()=>(0,n._)("h1",{style:{"margin-bottom":"0.5em"}}," Ma liste ",-1))),l={key:1},d={key:0,class:"vide"},c=o((()=>(0,n._)("p",null," Votre liste est toute vide ! Remplissez-là !",-1))),u=o((()=>(0,n._)("div",{class:"svg"},[(0,n._)("svg",{width:"37.754887mm",height:"64.519531mm",viewBox:"0 0 37.754887 64.519531",version:"1.1",id:"svg8","inkscape:version":"1.0.2 (e86c870879, 2021-01-15)","sodipodi:docname":"zero.svg.svg"},[(0,n._)("defs",{id:"defs2"}),(0,n._)("g",{"inkscape:label":"Calque 1","inkscape:groupmode":"layer",id:"layer1",transform:"translate(-81.569086,-48.910156)"},[(0,n._)("g",{id:"g1231"},[(0,n._)("g",{id:"g1176",transform:"matrix(0.80237356,0,0,0.87338105,19.85089,10.295552)",style:{stroke:"#ccc","stroke-width":"8.12304","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"}},[(0,n._)("path",{id:"path1113",style:{fill:"none",stroke:"#ccc","stroke-width":"8.12304","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-opacity":"1"},d:"m 119.91201,81.31131 c 0,-16.069076 -7.43818,-24.048362 -19.46548,-24.048362 -12.0273,0 -19.465479,7.979286 -19.465481,24.048362 -10e-7,16.069081 7.438181,24.04837 19.465481,24.04837 12.0273,0 19.46548,-7.979289 19.46548,-24.04837 z","sodipodi:nodetypes":"ccccc"})]),(0,n._)("path",{style:{color:"#000000","font-style":"normal","font-variant":"normal","font-weight":"normal","font-stretch":"normal","font-size":"medium","line-height":"normal","font-family":"sans-serif","font-variant-ligatures":"normal","font-variant-position":"normal","font-variant-caps":"normal","font-variant-numeric":"normal","font-variant-alternates":"normal","font-variant-east-asian":"normal","font-feature-settings":"normal","font-variation-settings":"normal","text-indent":"0","text-align":"start","text-decoration":"none","text-decoration-line":"none","text-decoration-style":"solid","text-decoration-color":"#000000","letter-spacing":"normal","word-spacing":"normal","text-transform":"none","writing-mode":"lr-tb",direction:"ltr","text-orientation":"mixed","dominant-baseline":"auto","baseline-shift":"baseline","text-anchor":"start","white-space":"normal","shape-padding":"0","shape-margin":"0","inline-size":"0","clip-rule":"nonzero",display:"inline",overflow:"visible",visibility:"visible",opacity:"1",isolation:"auto","mix-blend-mode":"normal","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","solid-color":"#000000","solid-opacity":"1","vector-effect":"none",fill:"#ccc","fill-opacity":"1","fill-rule":"nonzero",stroke:"none","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-opacity":"1","color-rendering":"auto","image-rendering":"auto","shape-rendering":"auto","text-rendering":"auto","enable-background":"accumulate","stop-color":"#000000","stop-opacity":"1"},d:"M 109.62305,48.910156 85.433594,113.42969 h 6.023437 L 115.64844,48.910156 Z",id:"path1203","sodipodi:nodetypes":"ccccc"})])])])],-1))),h=[c,u],p={key:1},g={class:"list"},m={class:"add-form"},f=o((()=>(0,n._)("label",{for:"element"},null,-1))),v=["disabled"],w={key:0,class:"error"},_=o((()=>(0,n._)("p",null,"Entrez au moins une lettre",-1))),y=[_],b={key:1,class:"error"},k=o((()=>(0,n._)("p",null,"C'est un peu long, il faut moins de 75 caractères",-1))),D=[k];function C(t,e,i,o,c,u){const _=(0,n.up)("LoaderView"),k=(0,n.up)("ListElement"),C=(0,n.up)("SpinnerBtn");return(0,n.wg)(),(0,n.iD)("section",null,[r,o.listStore.listData?((0,n.wg)(),(0,n.iD)("div",l,["vide"==o.listStore.listData[0]?((0,n.wg)(),(0,n.iD)("div",d,h)):((0,n.wg)(),(0,n.iD)("div",p,[(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.listStore.listData,(t=>((0,n.wg)(),(0,n.j4)(k,{key:t.id,title:t.content,id:t.id,done:t.done},null,8,["title","id","done"])))),128))])])),(0,n._)("div",m,[(0,n._)("form",{onSubmit:e[3]||(e[3]=(0,a.iM)((t=>this.handleFormSubmit()),["prevent"]))},[f,(0,n.wy)((0,n._)("input",{type:"text",id:"element","onUpdate:modelValue":e[0]||(e[0]=t=>this.newElement=t),placeholder:"Nouvelle ligne",onFocus:e[1]||(e[1]=t=>this.engouthCaracteres=!1)},null,544),[[a.nr,this.newElement]]),(0,n._)("button",{class:(0,s.C_)(["button",{hide:this.disableButton}]),disabled:this.disableButton},(0,s.zw)(this.buttonContent),11,v),this.disableButton?((0,n.wg)(),(0,n.j4)(C,{key:0})):(0,n.kq)("",!0),this.newCategoryAppear?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",id:"element","onUpdate:modelValue":e[2]||(e[2]=t=>this.newElement=t),placeholder:"Nouvelle rubrique"},null,512)),[[a.nr,this.newElement]]):(0,n.kq)("",!0)],32),"tooSmall"==this.engouthCaracteres?((0,n.wg)(),(0,n.iD)("div",w,y)):(0,n.kq)("",!0),"tooLarge"==this.engouthCaracteres?((0,n.wg)(),(0,n.iD)("div",b,D)):(0,n.kq)("",!0)])])):((0,n.wg)(),(0,n.j4)(_,{key:0}))])}const M={class:"container"},S=["id"],B={key:0,class:"error"},T=["id"],E=["id"],x=["id","innerHTML"];function A(t,e,i,o,r,l){const d=(0,n.up)("font-awesome-icon");return(0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("form",{onSubmit:e[2]||(e[2]=t=>l.handleSave(t,i.id))},[(0,n._)("div",{class:(0,s.C_)(["input",{hide:!this.editMode}])},[(0,n.wy)((0,n._)("input",{ref:"myInput",type:"text",id:"input-"+i.id,"onUpdate:modelValue":e[0]||(e[0]=t=>this.newTitle=t),onBlur:e[1]||(e[1]=t=>this.handleSave(t,i.id))},null,40,S),[[a.nr,this.newTitle]]),this.tooMuchCharacteres?((0,n.wg)(),(0,n.iD)("div",B," vous devez entrer moins de 75 charactères... ")):(0,n.kq)("",!0)],2)],32),(0,n._)("div",{class:(0,s.C_)(["input",{hide:!this.editMode}])},[(0,n._)("button",{style:{"margin-right":"1em"},id:"save-btn-"+i.id}," Enregistrer ",8,T),(0,n._)("button",{id:"cancel-btn-"+i.id,onMousedown:e[3]||(e[3]=t=>this.preventBlur=!0),onClick:e[4]||(e[4]=t=>l.handleCancelModify(t))}," Annuler ",40,E)],2),(0,n._)("div",{class:(0,s.C_)(["text",{hide:this.editMode}])},[(0,n._)("p",{class:(0,s.C_)(["title",{done:i.done}]),id:"p-"+i.id,onMousedown:e[5]||(e[5]=t=>l.handleSwitchToEditMode(i.id)),innerHTML:i.title},null,42,x),(0,n._)("button",{class:(0,s.C_)(["aside-p",{hide:i.done}]),onClick:e[6]||(e[6]=t=>{this.listStore.toggleDone(i.id)})},[(0,n.Wm)(d,{class:"square",icon:"fa-regular fa-square",alt:"Mettre à fait"})],2),(0,n._)("button",{class:(0,s.C_)(["aside-p",{hide:!i.done}]),onClick:e[7]||(e[7]=t=>{this.listStore.toggleDone(i.id)})},[(0,n.Wm)(d,{color:"green",class:"square",icon:"fa-regular fa-square-check",alt:"Mettre en non fait"})],2),(0,n._)("button",{class:"aside-p",onClick:e[8]||(e[8]=t=>this.listStore.delete(i.id))},[(0,n.Wm)(d,{color:"red",class:"square",icon:"fa-regular fa-trash-can",alt:"supprimer"})])],2)])}var z=i(1020),q=i(6265),L=i.n(q),j=i(7247);const V={base_url:"https://listeback-v2.raffiskender.com/wp-json/",async findAll(){const t=j.t.get("userData"),e=await L().get(this.base_url+"liste-de-course/v1/data/"+t.user_id,{headers:{Authorization:"Bearer "+t.token}}).catch((function(){return{data:null}}));return e.data},async update(t){const e=j.t.get("userData"),i=await L().put(this.base_url+"liste-de-course/v1/data/"+e.user_id,{json:t},{headers:{Authorization:"Bearer "+e.token}}).catch((function(){return{data:null}}));return i.data},async patch(t,e){const i=j.t.get("userData"),n=await L().patch(this.base_url+"wp/v2/list_element/"+t,{title:e},{headers:{Authorization:"Bearer "+i.token}}).catch((function(){return{data:null}}));return console.log(n.data),n.data},async delete(t){const e=j.t.get("userData");return await L()["delete"](this.base_url+"wp/v2/list_element/"+t,{headers:{Authorization:"Bearer "+e.token}}).catch((function(){return!1})),!0}},I=(0,z.Q_)("list",{state:()=>({listData:!1}),actions:{async findAll(){const t=await V.findAll();this.listData=JSON.parse(t)},async delete(t){this.listData=this.listData.filter((e=>e.id!==t)),0==this.listData.length&&(this.listData[0]="vide"),await V.update(JSON.stringify(this.listData))},async add(t){"vide"==this.listData[0]&&(this.listData=[]),this.listData.push(t),await V.update(JSON.stringify(this.listData))},toggleDone(t){for(const e of this.listData)e.id===t&&(e.done=!e.done);this.updateDatabase()},changeTitle(t,e){for(const i of this.listData)i.id===t&&(i.content=e);this.updateDatabase()},updateDatabase(){V.update(JSON.stringify(this.listData))}}});var N={props:{title:String,id:Number,done:Boolean},setup(){const t=I(),{listData:e}=(0,z.Jk)(t);return{listStore:t,listData:e}},data(){return{editMode:!1,newTitle:this.title,preventBlur:!1,tooMuchCharacteres:!1}},methods:{cleanMessage(t){return this.$sanitize(t)},handleSwitchToEditMode(t){this.done||(this.editMode=!0,this.preventBlur=!1,setTimeout((function(){document.getElementById("input-"+t).focus()})))},backToDisplayMode(){this.editMode=!1},handleCancelModify(){this.newTitle=this.title,this.tooMuchCharacteres=!1,this.backToDisplayMode()},handleSave(t,e){this.tooMuchCharacteres=!1,t.preventDefault(),this.preventBlur||(this.newTitle.length>75&&(this.tooMuchCharacteres=!0),""===this.newTitle&&(this.listStore.delete(e),this.backToDisplayMode()),this.title===this.newTitle||this.tooMuchCharacteres||(this.listStore.changeTitle(e,this.newTitle),this.backToDisplayMode()),this.title!=this.newTitle||this.tooMuchCharacteres||this.backToDisplayMode(),"submit"==t.type&&document.getElementById("save-btn-"+e).focus())}}},Z=i(89);const J=(0,Z.Z)(N,[["render",A],["__scopeId","data-v-79a6b7f8"]]);var O=J,R=i(6603);const W=t=>((0,n.dD)("data-v-7a63cf51"),t=t(),(0,n.Cn)(),t),F={disabled:""},H=W((()=>(0,n._)("div",null,null,-1))),U=[H];function $(t,e,i,a,s,o){return(0,n.wg)(),(0,n.iD)("button",F,U)}var G={name:"SpinnerBtn"};const K=(0,Z.Z)(G,[["render",$],["__scopeId","data-v-7a63cf51"]]);var Q=K,Y=i(3954),P=i(9079),X={name:"ListView",components:{ListElement:O,LoaderView:R.Z,SpinnerBtn:Q},setup(){const t=I(),e=(0,Y.L)();return{listStore:t,userStore:e}},data(){return{newElements:[],newElement:"",allRubriques:"",categoryAppear:!1,newCategoryAppear:!1,engouthCaracteres:!0,disableButton:!1,buttonContent:"Ajouter"}},async created(){await P.W.isConnected()?await this.listStore.findAll():this.$router.push({name:"403"})},methods:{cleanMessage(t){return this.$sanitize(t)},async handleFormSubmit(){this.engouthCaracteres=!0,this.newElement.length<1?this.engouthCaracteres="tooSmall":this.newElement.length>75?this.engouthCaracteres="tooLarge":(this.disableButton=!0,this.buttonContent="",this.newElement={id:Date.now(),content:this.cleanMessage(this.newElement),done:!1},this.listStore.add(this.newElement),this.newElement="",this.disableButton=!1,this.buttonContent="Ajouter")},handleToggleCategory(){this.categoryAppear=!this.categoryAppear},handleOnChange(t){const e=t.currentTarget;"new"===e.value?this.newCategoryAppear=!0:this.newCategoryAppear=!1}}};const tt=(0,Z.Z)(X,[["render",C],["__scopeId","data-v-eca45b3c"]]);var et=tt}}]);
//# sourceMappingURL=591.d79b63e3.js.map